import{q as W,u as X,a as Z,r as n,s as o,l as ee,j as e,S as y,B as d,A as ae,Q as L,C as P,c as I,i as te,K as T,a1 as se,a2 as re,a3 as le,a4 as ce,a5 as ie,H as l,I as c,a7 as m,a8 as p,a9 as _,aa as j,ab as i,$ as ne,P as oe,a6 as de,n as u}from"./index-DVRpR8yI.js";import{A as ue}from"./AdminBottomNav-tAHoeiS3.js";import{I as xe}from"./image-DF5DEVPi.js";import{P as ge}from"./pencil-DJqOO1iL.js";import"./wallet-R6EuwzlW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=W("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),k=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)","linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"];function fe(){const{user:N,userRole:C,loading:w}=X(),v=Z(),[f,R]=n.useState([]),[q,E]=n.useState(!0),[F,x]=n.useState(!1),[g,S]=n.useState(null),[t,r]=n.useState({title:"",subtitle:"",description:"",background_type:"gradient",background_value:k[0],image_url:"",image_position:"right",text_color:"#ffffff",text_align:"left",button_text:"",button_link:"",button_bg_color:"#ffffff",button_text_color:"#000000",height:"200px",border_radius:"16px",click_type:"none",click_target:"",is_active:!0,display_order:0}),[H,z]=n.useState([]),[G,U]=n.useState([]),[B,b]=n.useState(""),D=C==="admin"||C==="super_admin";n.useEffect(()=>{if(!w){if(!N||!D){v("/");return}h(),V(),$()}},[N,w,D,v]);const h=async()=>{try{const{data:a}=await o.from("hero_banners").select("*").order("display_order",{ascending:!0});a&&R(a)}catch(a){ee.error("Failed to fetch hero banners",{error:a})}E(!1)},V=async()=>{const{data:a}=await o.from("categories").select("id, name").eq("is_active",!0).order("name");a&&z(a)},$=async()=>{const{data:a}=await o.from("products").select("id, name, image_url").eq("is_active",!0).order("name");a&&U(a)},A=()=>{S(null),r({title:"",subtitle:"",description:"",background_type:"gradient",background_value:k[0],image_url:"",image_position:"right",text_color:"#ffffff",text_align:"left",button_text:"",button_link:"",button_bg_color:"#ffffff",button_text_color:"#000000",height:"200px",border_radius:"16px",click_type:"none",click_target:"",is_active:!0,display_order:f.length}),b(""),x(!0)},O=a=>{S(a),r({title:a.title,subtitle:a.subtitle||"",description:a.description||"",background_type:a.background_type,background_value:a.background_value,image_url:a.image_url||"",image_position:a.image_position,text_color:a.text_color,text_align:a.text_align,button_text:a.button_text||"",button_link:a.button_link||"",button_bg_color:a.button_bg_color,button_text_color:a.button_text_color,height:a.height,border_radius:a.border_radius,click_type:a.click_type||"none",click_target:a.click_target||"",is_active:a.is_active,display_order:a.display_order}),b(""),x(!0)},M=async()=>{if(!t.title.trim()){u.error("Title is required");return}try{const a={...t,subtitle:t.subtitle||null,description:t.description||null,image_url:t.image_url||null,button_text:t.button_text||null,button_link:t.button_link||null,click_type:t.click_type,click_target:t.click_target||null,updated_at:new Date().toISOString()};g?(await o.from("hero_banners").update(a).eq("id",g.id),u.success("Banner updated")):(await o.from("hero_banners").insert(a),u.success("Banner created")),x(!1),h()}catch{u.error("Failed to save banner")}},K=async a=>{if(confirm("Delete this banner?"))try{await o.from("hero_banners").delete().eq("id",a),u.success("Banner deleted"),h()}catch{u.error("Failed to delete")}},Q=async a=>{try{await o.from("hero_banners").update({is_active:!a.is_active}).eq("id",a.id),h()}catch{u.error("Failed to update")}},Y=()=>{const a={minHeight:t.height,borderRadius:t.border_radius,color:t.text_color};return t.background_type==="gradient"?a.background=t.background_value:t.background_type==="image"?(a.backgroundImage=`url(${t.background_value})`,a.backgroundSize="cover",a.backgroundPosition="center"):a.backgroundColor=t.background_value,a};return q?e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8"}),e.jsx(y,{className:"h-6 w-40"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-4",children:[1,2,3].map(a=>e.jsx(y,{className:"h-32 rounded-xl"},a))})]}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>v("/admin"),children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Hero Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Large homepage banners"})]})]}),e.jsxs(d,{onClick:A,size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-1"})," Add Banner"]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-4",children:f.length===0?e.jsx(P,{children:e.jsxs(I,{className:"py-12 text-center",children:[e.jsx(xe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No hero banners yet"}),e.jsxs(d,{onClick:A,className:"mt-4",children:[e.jsx(L,{className:"h-4 w-4 mr-2"})," Create First Banner"]})]})}):f.map(a=>e.jsxs(P,{className:a.is_active?"":"opacity-60",children:[e.jsx("div",{className:"h-24 rounded-t-lg flex items-center p-4",style:{background:a.background_type==="gradient"?a.background_value:a.background_type==="image"?`url(${a.background_value}) center/cover`:a.background_value,color:a.text_color},children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:a.title}),a.subtitle&&e.jsx("p",{className:"text-sm opacity-90",children:a.subtitle})]})}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Order: ",a.display_order]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{checked:a.is_active,onCheckedChange:()=>Q(a)}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>O(a),children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>K(a.id),children:e.jsx(se,{className:"h-4 w-4 text-destructive"})})]})]})})]},a.id))}),e.jsx(re,{open:F,onOpenChange:x,children:e.jsxs(le,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(ce,{children:e.jsx(ie,{children:g?"Edit Hero Banner":"Create Hero Banner"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Preview"}),e.jsx("div",{className:"relative overflow-hidden",style:Y(),children:e.jsxs("div",{className:"p-4",style:{textAlign:t.text_align},children:[e.jsx("h2",{className:"text-xl font-bold",children:t.title||"Banner Title"}),t.subtitle&&e.jsx("p",{className:"text-sm opacity-90",children:t.subtitle}),t.button_text&&e.jsx("button",{className:"mt-2 px-4 py-1 rounded-full text-sm font-semibold",style:{backgroundColor:t.button_bg_color,color:t.button_text_color},children:t.button_text})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Title *"}),e.jsx(c,{value:t.title,onChange:a=>r(s=>({...s,title:a.target.value})),placeholder:"New Year Sale!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Subtitle"}),e.jsx(c,{value:t.subtitle,onChange:a=>r(s=>({...s,subtitle:a.target.value})),placeholder:"Up to 50% off on everything"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Type"}),e.jsxs(m,{value:t.background_type,onValueChange:a=>r(s=>({...s,background_type:a})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"gradient",children:"Gradient"}),e.jsx(i,{value:"color",children:"Solid Color"}),e.jsx(i,{value:"image",children:"Image URL"})]})]})]}),t.background_type==="gradient"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Gradient"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:k.map((a,s)=>e.jsx("button",{className:`h-10 rounded-lg border-2 ${t.background_value===a?"border-primary":"border-transparent"}`,style:{background:a},onClick:()=>r(J=>({...J,background_value:a}))},s))})]}):t.background_type==="color"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t.background_value,onChange:a=>r(s=>({...s,background_value:a.target.value})),className:"h-10 w-20"}),e.jsx(c,{value:t.background_value,onChange:a=>r(s=>({...s,background_value:a.target.value})),placeholder:"#ff5722"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Image URL"}),e.jsx(c,{value:t.background_value,onChange:a=>r(s=>({...s,background_value:a.target.value})),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t.text_color,onChange:a=>r(s=>({...s,text_color:a.target.value})),className:"h-8 w-12"}),e.jsx(c,{value:t.text_color,onChange:a=>r(s=>({...s,text_color:a.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Text Align"}),e.jsxs(m,{value:t.text_align,onValueChange:a=>r(s=>({...s,text_align:a})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"left",children:"Left"}),e.jsx(i,{value:"center",children:"Center"}),e.jsx(i,{value:"right",children:"Right"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Button Text"}),e.jsx(c,{value:t.button_text,onChange:a=>r(s=>({...s,button_text:a.target.value})),placeholder:"Shop Now"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Button Link"}),e.jsx(c,{value:t.button_link,onChange:a=>r(s=>({...s,button_link:a.target.value})),placeholder:"/shop?category=sale"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Banner Click Action"]}),e.jsxs(m,{value:t.click_type,onValueChange:a=>r(s=>({...s,click_type:a,click_target:""})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"none",children:"None (No Click)"}),e.jsx(i,{value:"category",children:"Go to Category"}),e.jsx(i,{value:"product",children:"Go to Product"}),e.jsx(i,{value:"url",children:"Custom URL"})]})]})]}),t.click_type==="category"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Category"}),e.jsxs(m,{value:t.click_target,onValueChange:a=>r(s=>({...s,click_target:a})),children:[e.jsx(p,{children:e.jsx(_,{placeholder:"Choose a category"})}),e.jsx(j,{children:H.map(a=>e.jsx(i,{value:a.id,children:a.name},a.id))})]})]}),t.click_type==="product"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Product"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{placeholder:"Search products...",value:B,onChange:a=>b(a.target.value),className:"pl-8"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border rounded p-2 space-y-1",children:G.filter(a=>a.name.toLowerCase().includes(B.toLowerCase())).slice(0,15).map(a=>e.jsxs("button",{type:"button",className:`w-full flex items-center gap-2 p-2 rounded text-left text-sm hover:bg-muted ${t.click_target===a.id?"bg-primary/10 border-primary border":""}`,onClick:()=>r(s=>({...s,click_target:a.id})),children:[a.image_url?e.jsx("img",{src:a.image_url,alt:"",className:"w-8 h-8 rounded object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("span",{className:"flex-1 truncate",children:a.name}),t.click_target===a.id&&e.jsx("span",{className:"text-primary text-xs",children:"âœ“"})]},a.id))})]}),t.click_type==="url"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Click URL"}),e.jsx(c,{value:t.click_target,onChange:a=>r(s=>({...s,click_target:a.target.value})),placeholder:"/shop?category=sale or https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Display Order"}),e.jsx(c,{type:"number",value:t.display_order,onChange:a=>r(s=>({...s,display_order:parseInt(a.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Height"}),e.jsx(c,{value:t.height,onChange:a=>r(s=>({...s,height:a.target.value})),placeholder:"200px"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"active",checked:t.is_active,onCheckedChange:a=>r(s=>({...s,is_active:a}))}),e.jsx(l,{htmlFor:"active",children:"Active"})]})]}),e.jsxs(de,{children:[e.jsx(d,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(d,{onClick:M,children:g?"Save Changes":"Create Banner"})]})]})}),e.jsx(ue,{})]})}export{fe as default};
