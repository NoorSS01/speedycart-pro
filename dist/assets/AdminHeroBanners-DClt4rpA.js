import{c as W,k as X,n as Z,r as n,s as o,l as ee,j as e,v as y,B as d,T as te,z as L,x as T,y as I,F as ae,at as P,G as se,H as re,I as le,J as ce,L as l,K as c,aA as m,aB as p,aC as _,aD as j,aE as i,S as ie,A as ne,N as oe,Q as u}from"./index-Cg7UL77a.js";import{A as de}from"./AdminBottomNav-BHLz8l2e.js";import{I as ue}from"./image-NWlJN-gc.js";import{P as xe}from"./pencil-99repKYB.js";import{T as ge}from"./trash-2-CVbuaKtE.js";import"./sheet-LPIwcTPd.js";import"./wallet-BcFujo2b.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=W("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),k=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)","linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%)"];function ye(){const{user:N,userRole:C,loading:w}=X(),v=Z(),[f,E]=n.useState([]),[R,F]=n.useState(!0),[q,x]=n.useState(!1),[g,S]=n.useState(null),[a,r]=n.useState({title:"",subtitle:"",description:"",background_type:"gradient",background_value:k[0],image_url:"",image_position:"right",text_color:"#ffffff",text_align:"left",button_text:"",button_link:"",button_bg_color:"#ffffff",button_text_color:"#000000",height:"200px",border_radius:"16px",click_type:"none",click_target:"",is_active:!0,display_order:0}),[z,H]=n.useState([]),[G,U]=n.useState([]),[B,b]=n.useState(""),D=C==="admin"||C==="super_admin";n.useEffect(()=>{if(!w){if(!N||!D){v("/");return}h(),V(),O()}},[N,w,D,v]);const h=async()=>{try{const{data:t}=await o.from("hero_banners").select("*").order("display_order",{ascending:!0});t&&E(t)}catch(t){ee.error("Failed to fetch hero banners",{error:t})}F(!1)},V=async()=>{const{data:t}=await o.from("categories").select("id, name").eq("is_active",!0).order("name");t&&H(t)},O=async()=>{const{data:t}=await o.from("products").select("id, name, image_url").eq("is_active",!0).order("name");t&&U(t)},A=()=>{S(null),r({title:"",subtitle:"",description:"",background_type:"gradient",background_value:k[0],image_url:"",image_position:"right",text_color:"#ffffff",text_align:"left",button_text:"",button_link:"",button_bg_color:"#ffffff",button_text_color:"#000000",height:"200px",border_radius:"16px",click_type:"none",click_target:"",is_active:!0,display_order:f.length}),b(""),x(!0)},$=t=>{S(t),r({title:t.title,subtitle:t.subtitle||"",description:t.description||"",background_type:t.background_type,background_value:t.background_value,image_url:t.image_url||"",image_position:t.image_position,text_color:t.text_color,text_align:t.text_align,button_text:t.button_text||"",button_link:t.button_link||"",button_bg_color:t.button_bg_color,button_text_color:t.button_text_color,height:t.height,border_radius:t.border_radius,click_type:t.click_type||"none",click_target:t.click_target||"",is_active:t.is_active,display_order:t.display_order}),b(""),x(!0)},M=async()=>{if(!a.title.trim()){u.error("Title is required");return}try{const t={...a,subtitle:a.subtitle||null,description:a.description||null,image_url:a.image_url||null,button_text:a.button_text||null,button_link:a.button_link||null,click_type:a.click_type,click_target:a.click_target||null,updated_at:new Date().toISOString()};g?(await o.from("hero_banners").update(t).eq("id",g.id),u.success("Banner updated")):(await o.from("hero_banners").insert(t),u.success("Banner created")),x(!1),h()}catch{u.error("Failed to save banner")}},J=async t=>{if(confirm("Delete this banner?"))try{await o.from("hero_banners").delete().eq("id",t),u.success("Banner deleted"),h()}catch{u.error("Failed to delete")}},K=async t=>{try{await o.from("hero_banners").update({is_active:!t.is_active}).eq("id",t.id),h()}catch{u.error("Failed to update")}},Q=()=>{const t={minHeight:a.height,borderRadius:a.border_radius,color:a.text_color};return a.background_type==="gradient"?t.background=a.background_value:a.background_type==="image"?(t.backgroundImage=`url(${a.background_value})`,t.backgroundSize="cover",t.backgroundPosition="center"):t.backgroundColor=a.background_value,t};return R?e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8"}),e.jsx(y,{className:"h-6 w-40"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-4",children:[1,2,3].map(t=>e.jsx(y,{className:"h-32 rounded-xl"},t))})]}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>v("/admin"),children:e.jsx(te,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Hero Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Large homepage banners"})]})]}),e.jsxs(d,{onClick:A,size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-1"})," Add Banner"]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-4",children:f.length===0?e.jsx(T,{children:e.jsxs(I,{className:"py-12 text-center",children:[e.jsx(ue,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No hero banners yet"}),e.jsxs(d,{onClick:A,className:"mt-4",children:[e.jsx(L,{className:"h-4 w-4 mr-2"})," Create First Banner"]})]})}):f.map(t=>e.jsxs(T,{className:t.is_active?"":"opacity-60",children:[e.jsx("div",{className:"h-24 rounded-t-lg flex items-center p-4",style:{background:t.background_type==="gradient"?t.background_value:t.background_type==="image"?`url(${t.background_value}) center/cover`:t.background_value,color:t.text_color},children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:t.title}),t.subtitle&&e.jsx("p",{className:"text-sm opacity-90",children:t.subtitle})]})}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:t.is_active?"default":"secondary",children:t.is_active?"Active":"Inactive"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Order: ",t.display_order]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{checked:t.is_active,onCheckedChange:()=>K(t)}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>$(t),children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>J(t.id),children:e.jsx(ge,{className:"h-4 w-4 text-destructive"})})]})]})})]},t.id))}),e.jsx(se,{open:q,onOpenChange:x,children:e.jsxs(re,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(le,{children:e.jsx(ce,{children:g?"Edit Hero Banner":"Create Hero Banner"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Preview"}),e.jsx("div",{className:"relative overflow-hidden",style:Q(),children:e.jsxs("div",{className:"p-4",style:{textAlign:a.text_align},children:[e.jsx("h2",{className:"text-xl font-bold",children:a.title||"Banner Title"}),a.subtitle&&e.jsx("p",{className:"text-sm opacity-90",children:a.subtitle}),a.button_text&&e.jsx("button",{className:"mt-2 px-4 py-1 rounded-full text-sm font-semibold",style:{backgroundColor:a.button_bg_color,color:a.button_text_color},children:a.button_text})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Title *"}),e.jsx(c,{value:a.title,onChange:t=>r(s=>({...s,title:t.target.value})),placeholder:"New Year Sale!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Subtitle"}),e.jsx(c,{value:a.subtitle,onChange:t=>r(s=>({...s,subtitle:t.target.value})),placeholder:"Up to 50% off on everything"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Type"}),e.jsxs(m,{value:a.background_type,onValueChange:t=>r(s=>({...s,background_type:t})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"gradient",children:"Gradient"}),e.jsx(i,{value:"color",children:"Solid Color"}),e.jsx(i,{value:"image",children:"Image URL"})]})]})]}),a.background_type==="gradient"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Gradient"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:k.map((t,s)=>e.jsx("button",{className:`h-10 rounded-lg border-2 ${a.background_value===t?"border-primary":"border-transparent"}`,style:{background:t},onClick:()=>r(Y=>({...Y,background_value:t}))},s))})]}):a.background_type==="color"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.background_value,onChange:t=>r(s=>({...s,background_value:t.target.value})),className:"h-10 w-20"}),e.jsx(c,{value:a.background_value,onChange:t=>r(s=>({...s,background_value:t.target.value})),placeholder:"#ff5722"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Background Image URL"}),e.jsx(c,{value:a.background_value,onChange:t=>r(s=>({...s,background_value:t.target.value})),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a.text_color,onChange:t=>r(s=>({...s,text_color:t.target.value})),className:"h-8 w-12"}),e.jsx(c,{value:a.text_color,onChange:t=>r(s=>({...s,text_color:t.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Text Align"}),e.jsxs(m,{value:a.text_align,onValueChange:t=>r(s=>({...s,text_align:t})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"left",children:"Left"}),e.jsx(i,{value:"center",children:"Center"}),e.jsx(i,{value:"right",children:"Right"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Button Text"}),e.jsx(c,{value:a.button_text,onChange:t=>r(s=>({...s,button_text:t.target.value})),placeholder:"Shop Now"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Button Link"}),e.jsx(c,{value:a.button_link,onChange:t=>r(s=>({...s,button_link:t.target.value})),placeholder:"/shop?category=sale"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Banner Click Action"]}),e.jsxs(m,{value:a.click_type,onValueChange:t=>r(s=>({...s,click_type:t,click_target:""})),children:[e.jsx(p,{children:e.jsx(_,{})}),e.jsxs(j,{children:[e.jsx(i,{value:"none",children:"None (No Click)"}),e.jsx(i,{value:"category",children:"Go to Category"}),e.jsx(i,{value:"product",children:"Go to Product"}),e.jsx(i,{value:"url",children:"Custom URL"})]})]})]}),a.click_type==="category"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Category"}),e.jsxs(m,{value:a.click_target,onValueChange:t=>r(s=>({...s,click_target:t})),children:[e.jsx(p,{children:e.jsx(_,{placeholder:"Choose a category"})}),e.jsx(j,{children:z.map(t=>e.jsx(i,{value:t.id,children:t.name},t.id))})]})]}),a.click_type==="product"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Select Product"}),e.jsxs("div",{className:"relative",children:[e.jsx(ie,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(c,{placeholder:"Search products...",value:B,onChange:t=>b(t.target.value),className:"pl-8"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border rounded p-2 space-y-1",children:G.filter(t=>t.name.toLowerCase().includes(B.toLowerCase())).slice(0,15).map(t=>e.jsxs("button",{type:"button",className:`w-full flex items-center gap-2 p-2 rounded text-left text-sm hover:bg-muted ${a.click_target===t.id?"bg-primary/10 border-primary border":""}`,onClick:()=>r(s=>({...s,click_target:t.id})),children:[t.image_url?e.jsx("img",{src:t.image_url,alt:"",className:"w-8 h-8 rounded object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("span",{className:"flex-1 truncate",children:t.name}),a.click_target===t.id&&e.jsx("span",{className:"text-primary text-xs",children:"âœ“"})]},t.id))})]}),a.click_type==="url"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Click URL"}),e.jsx(c,{value:a.click_target,onChange:t=>r(s=>({...s,click_target:t.target.value})),placeholder:"/shop?category=sale or https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Display Order"}),e.jsx(c,{type:"number",value:a.display_order,onChange:t=>r(s=>({...s,display_order:parseInt(t.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Height"}),e.jsx(c,{value:a.height,onChange:t=>r(s=>({...s,height:t.target.value})),placeholder:"200px"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{id:"active",checked:a.is_active,onCheckedChange:t=>r(s=>({...s,is_active:t}))}),e.jsx(l,{htmlFor:"active",children:"Active"})]})]}),e.jsxs(oe,{children:[e.jsx(d,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(d,{onClick:M,children:g?"Save Changes":"Create Banner"})]})]})}),e.jsx(de,{})]})}export{ye as default};
