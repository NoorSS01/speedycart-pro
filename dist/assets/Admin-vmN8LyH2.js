import{q as Z,u as Q,a as V,r as u,b as X,s as O,l as Y,n as k,j as e,S as f,B as y,U as G,P as J,Q as K,C as h,c as g,R as T,i as P,V as L,z as C,W as ee,X as se,E as D,F as S,Y as te,T as ae,m as l,Z as R,_ as re,h as le}from"./index-DVRpR8yI.js";import{A as M}from"./AdminBottomNav-tAHoeiS3.js";import{C as de}from"./calendar-CPdgy-gA.js";import{W as ie,B as ne}from"./wallet-R6EuwzlW.js";import{D as oe}from"./dollar-sign-BYE9Blfa.js";import{P as _}from"./package-check-B9rXizBI.js";import{P as ce}from"./power-DdiBX_uO.js";import{I as me}from"./image-DF5DEVPi.js";import{L as xe}from"./layers-BEr4G0-W.js";import{P as ue}from"./palette-Bbixp7xe.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=Z("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),he=c=>{const a=new Date,r=new Date(a);switch(c){case"today":r.setHours(0,0,0,0);break;case"7days":r.setDate(a.getDate()-7),r.setHours(0,0,0,0);break;case"30days":r.setDate(a.getDate()-30),r.setHours(0,0,0,0);break;case"all":default:return new Date(0)}return r},$={today:"Today","7days":"7 Days","30days":"30 Days",all:"All Time"};function Ce(){const{user:c,userRole:a,loading:r}=Q(),t=V(),[i,v]=u.useState([]),[d,A]=u.useState(!0),[j,B]=u.useState("7days"),[w,H]=u.useState(0),{deliveryTimeMinutes:E,updateDeliveryTime:F}=X();u.useEffect(()=>{if(!r){if(!c){t("/auth");return}if(a!==null){if(a!=="admin"&&a!=="super_admin"){switch(a){case"delivery":t("/delivery");break;default:t("/shop");break}return}I()}}},[c,a,r,t,j]);const I=async()=>{A(!0);try{const s=he(j).toISOString();let m=O.from("orders").select("*").order("created_at",{ascending:!1});j!=="all"&&(m=m.gte("created_at",s));const{data:N,error:p}=await m;if(p)throw p;v(N||[]);const{data:x}=await O.from("delivery_applications").select("status").eq("status","pending");H((x==null?void 0:x.length)||0)}catch(s){Y.error("Error fetching admin data",{error:s}),k.error("Failed to load data")}finally{A(!1)}},n=u.useMemo(()=>{const s=i.filter(o=>o.status==="delivered"),m=i.filter(o=>o.status==="pending"||o.status==="confirmed"||o.status==="out_for_delivery"),N=s.reduce((o,W)=>o+(Number(W.total_amount)||0),0),p=s.length*4,x=s.length*5,U=p+x,q=N-U;return{totalOrders:i.length,pendingOrders:m.length,deliveredOrders:s.length,revenue:N,profit:q,commissionDeveloper:p,commissionDelivery:x}},[i]);return r||a===null?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b border-border/40 bg-background/40 backdrop-blur-xl shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx(f,{className:"h-8 w-48"})})}),e.jsx("main",{className:"container mx-auto px-4 py-6 space-y-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(s=>e.jsx(f,{className:"h-28 rounded-xl"},s))})}),e.jsx(M,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b border-border/40 bg-background/40 backdrop-blur-xl shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-primary/10 hover:bg-primary/20",onClick:()=>t("/admin/profile"),children:e.jsx(G,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg",children:e.jsx(J,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Admin"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Dashboard"})]})]}),e.jsxs(y,{size:"sm",onClick:()=>t("/admin/add-product"),className:"gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"Add"]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsx(de,{className:"w-4 h-4 text-muted-foreground shrink-0"}),Object.keys($).map(s=>e.jsx(y,{variant:j===s?"default":"outline",size:"sm",onClick:()=>B(s),className:"shrink-0",children:$[s]},s))]}),w>0&&e.jsx(h,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("/admin/delivery-apps"),children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-xl",children:e.jsx(T,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Applications"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w," pending review"]})]})]}),e.jsx(P,{className:"bg-amber-500",children:w})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(b,{title:"Net Profit",value:`₹${n.profit.toLocaleString()}`,icon:ie,color:"emerald",loading:d}),e.jsx(b,{title:"Revenue",value:`₹${n.revenue.toLocaleString()}`,icon:oe,color:"blue",loading:d}),e.jsx(b,{title:"Total Orders",value:n.totalOrders.toString(),icon:L,color:"purple",loading:d}),e.jsx(b,{title:"Pending",value:n.pendingOrders.toString(),icon:C,color:"amber",alert:n.pendingOrders>0,loading:d})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(b,{title:"Delivered",value:n.deliveredOrders.toString(),icon:_,color:"emerald",loading:d}),e.jsx(h,{className:"bg-gradient-to-br from-rose-50 to-white dark:from-rose-900/20 dark:to-slate-900 border-rose-100 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("/admin/to-pay"),children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-rose-100 dark:bg-rose-900/40",children:e.jsx(ee,{className:"w-5 h-5 text-rose-600"})}),e.jsx(se,{className:"w-4 h-4 text-rose-500"})]}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Payments"}),d?e.jsx(f,{className:"h-7 w-20 mt-1"}):e.jsxs("p",{className:"text-2xl font-bold tracking-tight text-rose-600",children:["₹",n.commissionDeveloper+n.commissionDelivery]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tap to pay →"})]})})]}),e.jsxs(h,{children:[e.jsx(D,{className:"pb-2",children:e.jsxs(S,{className:"text-base flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"}),"Admin Tools"]})}),e.jsxs(g,{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>t("/admin/delivery-apps"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-slate-900 border border-blue-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Apps"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Review applications"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/delivery-activations"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-teal-50 to-white dark:from-teal-900/20 dark:to-slate-900 border border-teal-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-teal-100 dark:bg-teal-900/40 rounded-lg",children:e.jsx(ce,{className:"w-5 h-5 text-teal-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Daily Activations"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Approve delivery shifts"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/stock"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-emerald-50 to-white dark:from-emerald-900/20 dark:to-slate-900 border border-emerald-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg",children:e.jsx(ne,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Products"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Manage inventory"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/banners"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-orange-50 to-white dark:from-orange-900/20 dark:to-slate-900 border border-orange-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/40 rounded-lg",children:e.jsx(z,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Promotional offers"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/coupon-triggers"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-yellow-50 to-white dark:from-yellow-900/20 dark:to-slate-900 border border-yellow-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg",children:e.jsx(R,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Coupon Triggers"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Automatic discounts"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/hero-banners"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-slate-900 border border-purple-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Hero Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Large homepage banners"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/offer-sections"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-pink-50 to-white dark:from-pink-900/20 dark:to-slate-900 border border-pink-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/40 rounded-lg",children:e.jsx(xe,{className:"w-5 h-5 text-pink-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Offer Sections"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"50% OFF zones, etc."})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/flash-deals"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-amber-50 to-white dark:from-amber-900/20 dark:to-slate-900 border border-amber-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg",children:e.jsx(R,{className:"w-5 h-5 text-amber-600 fill-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Flash Deals"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Time-limited offers"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/security"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-red-50 to-white dark:from-red-900/20 dark:to-slate-900 border border-red-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/40 rounded-lg",children:e.jsx(re,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Security"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Malicious activity"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/users"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-slate-900 border border-purple-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(T,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Users"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Manage roles"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/themes"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-slate-900 border border-indigo-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg",children:e.jsx(ue,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Themes"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Seasonal & festive"})]}),e.jsx(l,{className:"w-4 h-4 text-muted-foreground"})]})]})]}),e.jsxs(h,{children:[e.jsx(D,{className:"pb-2",children:e.jsxs(S,{className:"text-base flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Delivery Settings"]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Time Limit"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Max time for each delivery"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm bg-background",value:E,onChange:async s=>{await F(parseInt(s.target.value))?k.success(`Delivery time set to ${s.target.value} minutes`):k.error("Failed to update delivery time")},children:[e.jsx("option",{value:"15",children:"15 min"}),e.jsx("option",{value:"20",children:"20 min"}),e.jsx("option",{value:"30",children:"30 min"}),e.jsx("option",{value:"45",children:"45 min"}),e.jsx("option",{value:"60",children:"60 min"})]})})]})})]}),e.jsxs(h,{children:[e.jsx(D,{className:"pb-2",children:e.jsxs(S,{className:"text-base flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Recent Orders"]})}),e.jsx(g,{className:"space-y-3",children:d?[1,2,3].map(s=>e.jsx(f,{className:"h-16 rounded-xl"},s)):i.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No orders yet"}):i.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-xl cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>t("/admin/orders"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white
                      ${s.status==="delivered"?"bg-emerald-500":s.status==="pending"?"bg-amber-500":s.status==="cancelled"?"bg-red-500":"bg-blue-500"}
                    `,children:s.status==="delivered"?e.jsx(_,{className:"w-5 h-5"}):s.status==="pending"?e.jsx(C,{className:"w-5 h-5"}):e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:["Order #",s.id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:le(new Date(s.created_at),"MMM dd, HH:mm")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold",children:["₹",s.total_amount]}),e.jsx(P,{variant:"outline",className:`text-[10px] capitalize
                        ${s.status==="delivered"?"border-emerald-500 text-emerald-600":s.status==="pending"?"border-amber-500 text-amber-600":s.status==="cancelled"?"border-red-500 text-red-600":"border-blue-500 text-blue-600"}
                      `,children:s.status})]})]},s.id))})]})]}),e.jsx(M,{})]})}function b({title:c,value:a,icon:r,color:t,alert:i,loading:v}){const d={emerald:"from-emerald-50 to-white dark:from-emerald-900/20 border-emerald-100 text-emerald-600",blue:"from-blue-50 to-white dark:from-blue-900/20 border-blue-100 text-blue-600",purple:"from-purple-50 to-white dark:from-purple-900/20 border-purple-100 text-purple-600",amber:"from-amber-50 to-white dark:from-amber-900/20 border-amber-100 text-amber-600"};return e.jsx(h,{className:`bg-gradient-to-br ${d[t]} dark:to-slate-900`,children:e.jsxs(g,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`p-2 rounded-xl bg-${t}-100 dark:bg-${t}-900/40`,children:e.jsx(r,{className:`w-5 h-5 text-${t}-600`})}),i&&e.jsxs("span",{className:"flex h-2.5 w-2.5 relative",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-amber-500"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:c}),v?e.jsx(f,{className:"h-7 w-20 mt-1"}):e.jsx("p",{className:"text-2xl font-bold tracking-tight",children:a})]})})}export{Ce as default};
