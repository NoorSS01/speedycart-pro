import{c as J,r as x,s as N,l as O,j as e,k as b,m as j,K as F,N as $,aw as R,L as P,_ as K,I,B as k,a3 as z,y as i,u as se,b as ae,ak as te,f as T,U as re,o as le,n as de,ay as q,q as B,J as H,az as ne,aA as ie,al as oe,C as c,Z as W,W as ce,am as me}from"./index-CzqGsn4l.js";import{A as U}from"./AdminBottomNav-Cj834JeN.js";import{C as Q}from"./calendar-cCyy_GL4.js";import{W as xe,B as he}from"./wallet-VifLp9f-.js";import{D as ue}from"./dollar-sign-D1JyXdel.js";import{P as V}from"./package-check-dOGKkItf.js";import{P as pe}from"./power-vofoOcuv.js";import{L as ge}from"./layout-grid-ctCpIyaZ.js";import{I as fe}from"./image-oHatqPTZ.js";import{L as be}from"./layers-BVSMj-Fr.js";import{P as je}from"./palette-2epFmUzp.js";import"./sheet-u2JDy9wS.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=J("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=J("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);function ve(){const[l,r]=x.useState({shop_status:"open",closed_message:"We are currently closed. Please try again later.",scheduled_open_time:"08:00",scheduled_close_time:"22:00",schedule_enabled:!1}),[n,t]=x.useState(!0),[o,h]=x.useState(!1);x.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:a,error:d}=await N.from("admin_settings").select("*").eq("id","00000000-0000-0000-0000-000000000001").single();if(d)O.warn("Shop status columns may not exist yet",{error:d});else if(a){const p=a;r({shop_status:p.shop_status||"open",closed_message:p.closed_message||"We are currently closed. Please try again later.",scheduled_open_time:_(p.scheduled_open_time),scheduled_close_time:_(p.scheduled_close_time),schedule_enabled:p.schedule_enabled||!1})}}catch(a){O.error("Error fetching shop settings",{error:a})}finally{t(!1)}},_=a=>a?/^\d{2}:\d{2}$/.test(a)?a:/^\d{2}:\d{2}:\d{2}$/.test(a)?a.slice(0,5):"08:00":"08:00",v=async()=>{const a=l.shop_status==="open"?"closed":"open";h(!0);try{const{error:d}=await N.from("admin_settings").update({shop_status:a}).eq("id","00000000-0000-0000-0000-000000000001");d?(i.error("Failed to update shop status"),O.error("Error updating shop status",{error:d})):(r(p=>({...p,shop_status:a})),i.success(`Shop is now ${a==="open"?"OPEN":"CLOSED"}`))}catch{i.error("Failed to update shop status")}finally{h(!1)}},E=async()=>{h(!0);try{const{error:a}=await N.from("admin_settings").update({closed_message:l.closed_message}).eq("id","00000000-0000-0000-0000-000000000001");a?i.error("Failed to save message"):i.success("Closed message saved")}catch{i.error("Failed to save message")}finally{h(!1)}},S=async()=>{h(!0);try{const{error:a}=await N.from("admin_settings").update({scheduled_open_time:l.scheduled_open_time+":00",scheduled_close_time:l.scheduled_close_time+":00",schedule_enabled:l.schedule_enabled}).eq("id","00000000-0000-0000-0000-000000000001");a?(i.error("Failed to save schedule"),O.error("Error saving schedule",{error:a})):i.success("Schedule saved")}catch{i.error("Failed to save schedule")}finally{h(!1)}};if(n)return e.jsx(b,{children:e.jsx(j,{className:"py-8 flex justify-center",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})})});const u=l.shop_status==="open";return e.jsxs(b,{className:`border-2 ${u?"border-green-500/50":"border-red-500/50"}`,children:[e.jsx(F,{className:"pb-3",children:e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:`h-5 w-5 ${u?"text-green-500":"text-red-500"}`}),"Shop Status"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Shop is ",u?"OPEN":"CLOSED"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u?"Accepting orders (assigned when delivery available)":"Not accepting new orders"})]})]}),e.jsx(R,{checked:u,onCheckedChange:v,disabled:o})]}),!u&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Message shown to customers"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{value:l.closed_message,onChange:a=>r(d=>({...d,closed_message:a.target.value})),placeholder:"We are currently closed..."}),e.jsx(k,{onClick:E,disabled:o,size:"sm",children:"Save"})]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"flex items-center gap-2 font-medium",children:[e.jsx(Q,{className:"h-4 w-4"}),"Automatic Schedule"]}),e.jsx(R,{checked:l.schedule_enabled,onCheckedChange:a=>r(d=>({...d,schedule_enabled:a})),disabled:o})]}),l.schedule_enabled&&e.jsxs("div",{className:"space-y-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(P,{className:"text-xs",children:"Opens at"}),e.jsx(I,{type:"time",value:l.scheduled_open_time,onChange:a=>r(d=>({...d,scheduled_open_time:a.target.value}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(P,{className:"text-xs",children:"Closes at"}),e.jsx(I,{type:"time",value:l.scheduled_close_time,onChange:a=>r(d=>({...d,scheduled_close_time:a.target.value}))})]})]}),e.jsx(k,{onClick:S,disabled:o,size:"sm",className:"w-full",children:"Save Schedule"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shop will automatically open/close based on this schedule."})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-start gap-2",children:[e.jsx(z,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"When shop is open, orders are accepted even if no delivery partner is active. They will be automatically assigned when a delivery partner activates."})]})]})]})}const we=l=>{const r=new Date,n=new Date(r);switch(l){case"today":n.setHours(0,0,0,0);break;case"7days":n.setDate(r.getDate()-7),n.setHours(0,0,0,0);break;case"30days":n.setDate(r.getDate()-30),n.setHours(0,0,0,0);break;case"all":default:return new Date(0)}return n},G={today:"Today","7days":"7 Days","30days":"30 Days",all:"All Time"};function Fe(){const{user:l,userRole:r,loading:n}=se(),t=ae(),[o,h]=x.useState([]),[m,_]=x.useState(!0),[v,E]=x.useState("7days"),[S,u]=x.useState(0),[a,d]=x.useState(499),{deliveryTimeMinutes:p,updateDeliveryTime:X}=te();x.useEffect(()=>{if(!n){if(!l){t("/auth");return}if(r!==null){if(r!=="admin"&&r!=="super_admin"){switch(r){case"delivery":t("/delivery");break;default:t("/shop");break}return}Y()}}},[l,r,n,t,v]);const Y=async()=>{_(!0);try{const s=we(v).toISOString();let w=N.from("orders").select("*").order("created_at",{ascending:!1});v!=="all"&&(w=w.gte("created_at",s));const{data:L,error:C}=await w;if(C)throw C;h(L||[]);const{data:y}=await N.from("delivery_applications").select("status").eq("status","pending");u((y==null?void 0:y.length)||0);const{data:M}=await N.from("app_settings").select("value").eq("key","free_delivery_threshold").single();if(M){const D=M.value,g=typeof D=="string"?parseFloat(D):D;d(g||499)}}catch(s){O.error("Error fetching admin data",{error:s}),i.error("Failed to load data")}finally{_(!1)}},f=x.useMemo(()=>{const s=o.filter(g=>g.status==="delivered"),w=o.filter(g=>g.status==="pending"||g.status==="confirmed"||g.status==="out_for_delivery"),L=s.reduce((g,ee)=>g+(Number(ee.total_amount)||0),0),C=s.length*4,y=s.length*5,M=C+y,D=L-M;return{totalOrders:o.length,pendingOrders:w.length,deliveredOrders:s.length,revenue:L,profit:D,commissionDeveloper:C,commissionDelivery:y}},[o]);return n||r===null?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b border-border/40 bg-background/40 backdrop-blur-xl shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx(T,{className:"h-8 w-48"})})}),e.jsx("main",{className:"container mx-auto px-4 py-6 space-y-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(s=>e.jsx(T,{className:"h-28 rounded-xl"},s))})}),e.jsx(U,{})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b border-border/40 bg-background/40 backdrop-blur-xl shadow-lg",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-primary/10 hover:bg-primary/20",onClick:()=>t("/admin/profile"),children:e.jsx(re,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg",children:e.jsx(le,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Admin"}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Dashboard"})]})]}),e.jsxs(k,{size:"sm",onClick:()=>t("/admin/add-product"),className:"gap-1",children:[e.jsx(de,{className:"w-4 h-4"}),"Add"]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[e.jsx(Q,{className:"w-4 h-4 text-muted-foreground shrink-0"}),Object.keys(G).map(s=>e.jsx(k,{variant:v===s?"default":"outline",size:"sm",onClick:()=>E(s),className:"shrink-0",children:G[s]},s))]}),S>0&&e.jsx(b,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("/admin/delivery-apps"),children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-xl",children:e.jsx(q,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Applications"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S," pending review"]})]})]}),e.jsx(B,{className:"bg-amber-500",children:S})]})})}),e.jsx(ve,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(A,{title:"Net Profit",value:`₹${f.profit.toLocaleString()}`,icon:xe,color:"emerald",loading:m}),e.jsx(A,{title:"Revenue",value:`₹${f.revenue.toLocaleString()}`,icon:ue,color:"blue",loading:m}),e.jsx(A,{title:"Total Orders",value:f.totalOrders.toString(),icon:H,color:"purple",loading:m}),e.jsx(A,{title:"Pending",value:f.pendingOrders.toString(),icon:z,color:"amber",alert:f.pendingOrders>0,loading:m})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(A,{title:"Delivered",value:f.deliveredOrders.toString(),icon:V,color:"emerald",loading:m}),e.jsx(b,{className:"bg-gradient-to-br from-rose-50 to-white dark:from-rose-900/20 dark:to-slate-900 border-rose-100 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t("/admin/to-pay"),children:e.jsxs(j,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-rose-100 dark:bg-rose-900/40",children:e.jsx(ne,{className:"w-5 h-5 text-rose-600"})}),e.jsx(K,{className:"w-4 h-4 text-rose-500"})]}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Payments"}),m?e.jsx(T,{className:"h-7 w-20 mt-1"}):e.jsxs("p",{className:"text-2xl font-bold tracking-tight text-rose-600",children:["₹",f.commissionDeveloper+f.commissionDelivery]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Tap to pay →"})]})})]}),e.jsxs(b,{children:[e.jsx(F,{className:"pb-2",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Admin Tools"]})}),e.jsxs(j,{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>t("/admin/delivery-apps"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-blue-50 to-white dark:from-blue-900/20 dark:to-slate-900 border border-blue-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/40 rounded-lg",children:e.jsx(oe,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Apps"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Review applications"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/delivery-activations"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-teal-50 to-white dark:from-teal-900/20 dark:to-slate-900 border border-teal-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-teal-100 dark:bg-teal-900/40 rounded-lg",children:e.jsx(pe,{className:"w-5 h-5 text-teal-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Daily Activations"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Approve delivery shifts"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/stock"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-emerald-50 to-white dark:from-emerald-900/20 dark:to-slate-900 border border-emerald-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg",children:e.jsx(he,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Products"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Manage inventory"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/category-sections"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-cyan-50 to-white dark:from-cyan-900/20 dark:to-slate-900 border border-cyan-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-cyan-100 dark:bg-cyan-900/40 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5 text-cyan-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Category Sections"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Shop page visibility"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/banners"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-orange-50 to-white dark:from-orange-900/20 dark:to-slate-900 border border-orange-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/40 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Promotional offers"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/coupon-triggers"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-yellow-50 to-white dark:from-yellow-900/20 dark:to-slate-900 border border-yellow-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/40 rounded-lg",children:e.jsx(W,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Coupon Triggers"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Automatic discounts"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/hero-banners"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-slate-900 border border-purple-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Hero Banners"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Large homepage banners"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/offer-sections"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-pink-50 to-white dark:from-pink-900/20 dark:to-slate-900 border border-pink-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/40 rounded-lg",children:e.jsx(be,{className:"w-5 h-5 text-pink-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Offer Sections"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"50% OFF zones, etc."})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/flash-deals"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-amber-50 to-white dark:from-amber-900/20 dark:to-slate-900 border border-amber-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/40 rounded-lg",children:e.jsx(W,{className:"w-5 h-5 text-amber-600 fill-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Flash Deals"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Time-limited offers"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/security"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-red-50 to-white dark:from-red-900/20 dark:to-slate-900 border border-red-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/40 rounded-lg",children:e.jsx(ce,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Security"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Malicious activity"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/users"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-purple-50 to-white dark:from-purple-900/20 dark:to-slate-900 border border-purple-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/40 rounded-lg",children:e.jsx(q,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Users"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Manage roles"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("button",{onClick:()=>t("/admin/themes"),className:"flex items-center gap-3 p-3 bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-slate-900 border border-indigo-100 rounded-xl text-left hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg",children:e.jsx(je,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"Themes"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Seasonal & festive"})]}),e.jsx(c,{className:"w-4 h-4 text-muted-foreground"})]})]})]}),e.jsxs(b,{children:[e.jsx(F,{className:"pb-2",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Delivery Settings"]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Delivery Time Limit"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Max time for each delivery"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"border rounded-lg px-3 py-2 text-sm bg-background",value:p,onChange:async s=>{await X(parseInt(s.target.value))?i.success(`Delivery time set to ${s.target.value} minutes`):i.error("Failed to update delivery time")},children:[e.jsx("option",{value:"15",children:"15 min"}),e.jsx("option",{value:"20",children:"20 min"}),e.jsx("option",{value:"30",children:"30 min"}),e.jsx("option",{value:"45",children:"45 min"}),e.jsx("option",{value:"60",children:"60 min"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Free Delivery Threshold"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Min order for free delivery"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"₹"}),e.jsx("input",{type:"number",min:"0",step:"50",className:"border rounded-lg px-3 py-2 text-sm bg-background w-20",value:a,onChange:s=>d(parseInt(s.target.value)||0)}),e.jsx(k,{size:"sm",onClick:async()=>{try{const{error:s}=await N.from("app_settings").upsert({key:"free_delivery_threshold",value:a.toString(),description:"Minimum order amount for free delivery in INR",updated_at:new Date().toISOString()},{onConflict:"key"});if(s)throw s;i.success(`Free delivery threshold set to ₹${a}`)}catch{i.error("Failed to update threshold")}},children:"Save"})]})]})]})]}),e.jsxs(b,{children:[e.jsx(F,{className:"pb-2",children:e.jsxs($,{className:"text-base flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Recent Orders"]})}),e.jsx(j,{className:"space-y-3",children:m?[1,2,3].map(s=>e.jsx(T,{className:"h-16 rounded-xl"},s)):o.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No orders yet"}):o.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-xl cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>t("/admin/orders"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white
                      ${s.status==="delivered"?"bg-emerald-500":s.status==="pending"?"bg-amber-500":s.status==="cancelled"?"bg-red-500":"bg-blue-500"}
                    `,children:s.status==="delivered"?e.jsx(V,{className:"w-5 h-5"}):s.status==="pending"?e.jsx(z,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:["Order #",s.id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.created_at?me(new Date(s.created_at),"MMM dd, HH:mm"):"N/A"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold",children:["₹",s.total_amount]}),e.jsx(B,{variant:"outline",className:`text-[10px] capitalize
                        ${s.status==="delivered"?"border-emerald-500 text-emerald-600":s.status==="pending"?"border-amber-500 text-amber-600":s.status==="cancelled"?"border-red-500 text-red-600":"border-blue-500 text-blue-600"}
                      `,children:s.status||"unknown"})]})]},s.id))})]})]}),e.jsx(U,{})]})}function A({title:l,value:r,icon:n,color:t,alert:o,loading:h}){const m={emerald:"from-emerald-50 to-white dark:from-emerald-900/20 border-emerald-100 text-emerald-600",blue:"from-blue-50 to-white dark:from-blue-900/20 border-blue-100 text-blue-600",purple:"from-purple-50 to-white dark:from-purple-900/20 border-purple-100 text-purple-600",amber:"from-amber-50 to-white dark:from-amber-900/20 border-amber-100 text-amber-600"};return e.jsx(b,{className:`bg-gradient-to-br ${m[t]} dark:to-slate-900`,children:e.jsxs(j,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:`p-2 rounded-xl bg-${t}-100 dark:bg-${t}-900/40`,children:e.jsx(n,{className:`w-5 h-5 text-${t}-600`})}),o&&e.jsxs("span",{className:"flex h-2.5 w-2.5 relative",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-amber-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-amber-500"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:l}),h?e.jsx(T,{className:"h-7 w-20 mt-1"}):e.jsx("p",{className:"text-2xl font-bold tracking-tight",children:r})]})})}export{Fe as default};
