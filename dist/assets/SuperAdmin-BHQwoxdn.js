import{b3 as he,j as e,aU as cs,r as a,aW as ms,a7 as fe,b4 as xs,a9 as us,aX as ps,ac as gs,b5 as hs,a_ as fs,b0 as js,aY as je,a$ as vs,aV as ys,e as S,b6 as ve,u as bs,b as Ns,s as m,l as xe,B as u,aB as X,aC as J,aD as Z,aE as ee,aF as y,ax as _s,k as g,m as h,aA as ue,K as f,N as j,L as k,I,V as ks,M as ws,n as As,al as Ds,W as Ss,y as o}from"./index-CzqGsn4l.js";import{T as Cs,a as Ps,b as U,c as F}from"./tabs-B27AhHhA.js";import{B as Rs,W as Os}from"./wallet-VifLp9f-.js";import{C as Is}from"./calendar-cCyy_GL4.js";import{S as Fs}from"./square-pen-DN9JGUfE.js";import{T as pe}from"./trash-2-Gw59I6Fz.js";import"./index-Cpbua6Wm.js";var ye="AlertDialog",[Ts]=us(ye,[he]),w=he(),be=t=>{const{__scopeAlertDialog:i,...n}=t,c=w(i);return e.jsx(cs,{...c,...n,modal:!0})};be.displayName=ye;var Es="AlertDialogTrigger",Ls=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,x=w(n);return e.jsx(ys,{...x,...c,ref:i})});Ls.displayName=Es;var qs="AlertDialogPortal",Ne=t=>{const{__scopeAlertDialog:i,...n}=t,c=w(i);return e.jsx(ms,{...c,...n})};Ne.displayName=qs;var Ms="AlertDialogOverlay",_e=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,x=w(n);return e.jsx(vs,{...x,...c,ref:i})});_e.displayName=Ms;var T="AlertDialogContent",[$s,Us]=Ts(T),zs=hs("AlertDialogContent"),ke=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,children:c,...x}=t,E=w(n),R=a.useRef(null),Y=fe(i,R),z=a.useRef(null);return e.jsx(xs,{contentName:T,titleName:we,docsSlug:"alert-dialog",children:e.jsx($s,{scope:n,cancelRef:z,children:e.jsxs(ps,{role:"alertdialog",...E,...x,ref:Y,onOpenAutoFocus:gs(x.onOpenAutoFocus,C=>{var L;C.preventDefault(),(L=z.current)==null||L.focus({preventScroll:!0})}),onPointerDownOutside:C=>C.preventDefault(),onInteractOutside:C=>C.preventDefault(),children:[e.jsx(zs,{children:c}),e.jsx(Ws,{contentRef:R})]})})})});ke.displayName=T;var we="AlertDialogTitle",Ae=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,x=w(n);return e.jsx(fs,{...x,...c,ref:i})});Ae.displayName=we;var De="AlertDialogDescription",Se=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,x=w(n);return e.jsx(js,{...x,...c,ref:i})});Se.displayName=De;var Vs="AlertDialogAction",Ce=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,x=w(n);return e.jsx(je,{...x,...c,ref:i})});Ce.displayName=Vs;var Pe="AlertDialogCancel",Re=a.forwardRef((t,i)=>{const{__scopeAlertDialog:n,...c}=t,{cancelRef:x}=Us(Pe,n),E=w(n),R=fe(i,x);return e.jsx(je,{...E,...c,ref:R})});Re.displayName=Pe;var Ws=({contentRef:t})=>{const i=`\`${T}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${T}\` by passing a \`${De}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${T}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{var c;document.getElementById((c=t.current)==null?void 0:c.getAttribute("aria-describedby"))||console.warn(i)},[i,t]),null},Ys=be,Bs=Ne,Oe=_e,Ie=ke,Fe=Ce,Te=Re,Ee=Ae,Le=Se;const Hs=Ys,Gs=Bs,qe=a.forwardRef(({className:t,...i},n)=>e.jsx(Oe,{className:S("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:n}));qe.displayName=Oe.displayName;const Me=a.forwardRef(({className:t,...i},n)=>e.jsxs(Gs,{children:[e.jsx(qe,{}),e.jsx(Ie,{ref:n,className:S("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i})]}));Me.displayName=Ie.displayName;const $e=({className:t,...i})=>e.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",t),...i});$e.displayName="AlertDialogHeader";const Ue=({className:t,...i})=>e.jsx("div",{className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...i});Ue.displayName="AlertDialogFooter";const ze=a.forwardRef(({className:t,...i},n)=>e.jsx(Ee,{ref:n,className:S("text-lg font-semibold",t),...i}));ze.displayName=Ee.displayName;const Ve=a.forwardRef(({className:t,...i},n)=>e.jsx(Le,{ref:n,className:S("text-sm text-muted-foreground",t),...i}));Ve.displayName=Le.displayName;const We=a.forwardRef(({className:t,...i},n)=>e.jsx(Fe,{ref:n,className:S(ve(),t),...i}));We.displayName=Fe.displayName;const Ye=a.forwardRef(({className:t,...i},n)=>e.jsx(Te,{ref:n,className:S(ve({variant:"outline"}),"mt-2 sm:mt-0",t),...i}));Ye.displayName=Te.displayName;const ge={today:"Today","7days":"Last 7 Days","1month":"Last 1 Month","6months":"Last 6 Months","1year":"Last 1 Year"};function tt(){const{user:t,loading:i,signOut:n}=bs(),c=Ns(),[x,E]=a.useState([]),[R,Y]=a.useState([]),[z,C]=a.useState([]),[L,Be]=a.useState([]),[He,Ge]=a.useState([]),[se,Ke]=a.useState([]),[v,te]=a.useState({totalOrders:0,pendingOrders:0,deliveredOrders:0,revenue:0,totalUsers:0,deliveryPersons:0,pendingApplications:0,commissionDeveloper:0,commissionDelivery:0,profit:0}),[q,ae]=a.useState(null),[d,b]=a.useState({name:"",description:"",price:"",stock_quantity:"",unit:"piece",category_id:"",image_url:""}),[P,B]=a.useState({userId:"",newRole:"user"}),[A,V]=a.useState({open:!1,type:null,id:"",name:""}),[D,Qe]=a.useState("today"),[N,Xe]=a.useState({isLocked:!1,paymentStatus:"none",paidAt:null}),[re,Je]=a.useState([]),le=a.useCallback(async()=>{const{data:s,error:l}=await m.from("payouts").select("id, amount, status, type, transaction_date, created_at, payer_id").eq("type","developer_commission").order("created_at",{ascending:!1});s&&Je(s),l&&xe.error("Error fetching payouts",{error:l})},[]),ie=async(s,l)=>{const{error:r}=await m.from("payouts").update({status:l}).eq("id",s);r?o.error("Failed to update status"):(o.success(`Payment ${l}`),le())};a.useEffect(()=>{t&&!i&&le()},[t,i]);const H=a.useCallback(async()=>{const s=m,{data:l,error:r}=await s.from("admin_settings").select("*").eq("key","admin_lockout").single();if(!r&&l){const p=l;Xe({isLocked:(p==null?void 0:p.is_locked)||!1,paymentStatus:(p==null?void 0:p.payment_status)||"none",paidAt:(p==null?void 0:p.paid_at)||null})}},[]),O=a.useCallback(async()=>{const s=new Date;s.setHours(0,0,0,0),D==="7days"?s.setDate(s.getDate()-7):D==="1month"?s.setMonth(s.getMonth()-1):D==="1year"&&s.setFullYear(s.getFullYear()-1);const[l,r,p]=await Promise.all([m.from("orders").select("total_amount, status, created_at").gte("created_at",s.toISOString()),m.from("profiles").select("id, role, created_at").gte("created_at",s.toISOString()),m.from("delivery_assignments").select("id, created_at, delivery_fee, commission_amount").gte("created_at",s.toISOString())]);if(l.data){const _=l.data,os=_.filter($=>$.status!=="cancelled").reduce(($,Q)=>$+(Q.total_amount||0),0);te($=>({...$,totalOrders:_.length,totalRevenue:os,pendingOrders:_.filter(Q=>Q.status==="pending").length}))}r.data&&te(_=>({..._,totalUsers:r.data.length})),p.data},[D]),G=a.useCallback(async()=>{const{data:s}=await m.from("orders").select(`
        *,
        profiles:user_id (full_name, phone)
      `).order("created_at",{ascending:!1}).limit(50);if(s){const l=s.map(r=>({...r,created_at:r.created_at||new Date().toISOString(),status:r.status,updated_at:r.updated_at||null}));C(l)}},[]);a.useEffect(()=>{t&&(G(),O())},[D,t,G,O]);const M=a.useCallback(async()=>{const{data:s}=await m.from("products").select("*").order("name");if(s){const l=s.map(r=>({...r,stock_quantity:r.stock_quantity??0,unit:r.unit||"piece"}));E(l)}},[]),Ze=a.useCallback(async()=>{const{data:s}=await m.from("categories").select("id, name").order("name");s&&Y(s)},[]),es=a.useCallback(async()=>{const{data:s}=await m.from("malicious_activities").select("*").order("detected_at",{ascending:!1});if(s){const l=s.map(r=>({...r,detected_at:r.detected_at||new Date().toISOString()}));Be(l)}},[]),W=a.useCallback(async()=>{const{data:s}=await m.from("user_roles").select("*").order("created_at",{ascending:!1});if(s){const l=s.map(r=>({id:r.id,user_id:r.user_id,role:r.role,created_at:r.created_at||new Date().toISOString()}));Ge(l)}},[]),ne=a.useCallback(async()=>{const{data:s}=await m.from("delivery_applications").select("*").order("created_at",{ascending:!1});if(s){const l=s.map(r=>({id:r.id,user_id:r.user_id,full_name:r.full_name,phone:r.phone_number||r.phone,vehicle_type:r.vehicle_type,license_number:r.vehicle_number||r.license_number,status:r.status,created_at:r.created_at||new Date().toISOString()}));Ke(l)}},[]),de=a.useCallback(async()=>{await Promise.all([M(),Ze(),G(),es(),W(),ne(),O(),H()])},[]);a.useEffect(()=>{t&&de()},[t,de]);const oe=async s=>{const l=m,{error:r}=await l.from("admin_settings").update({is_locked:s,payment_status:s?"pending":"none",locked_at:s?new Date().toISOString():null,paid_at:null,confirmed_at:null,updated_at:new Date().toISOString()}).eq("id","00000000-0000-0000-0000-000000000001");r?o.error("Failed to update admin lock status"):(o.success(s?"Admin access locked! Payment required.":"Admin access unlocked!"),H())},ss=async()=>{const s=m,{error:l}=await s.from("admin_settings").update({is_locked:!1,payment_status:"none",confirmed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id","00000000-0000-0000-0000-000000000001");l?o.error("Failed to confirm payment"):(o.success("Payment confirmed! Admin access restored."),H())},ts=async()=>{if(!d.name||!d.price||!d.category_id){o.error("Please fill all required fields");return}const s={name:d.name,description:d.description||null,price:parseFloat(d.price),stock_quantity:parseInt(d.stock_quantity)||0,unit:d.unit,category_id:d.category_id,image_url:d.image_url||null,is_active:!0};if(q){const{error:l}=await m.from("products").update(s).eq("id",q.id);l?o.error("Failed to update product"):(o.success("Product updated successfully"),K(),M())}else{const{error:l}=await m.from("products").insert(s);l?o.error("Failed to create product"):(o.success("Product created successfully"),K(),M())}},as=s=>{var l;ae(s),b({name:s.name,description:s.description||"",price:s.price.toString(),stock_quantity:((l=s.stock_quantity)==null?void 0:l.toString())||"0",unit:s.unit||"piece",category_id:s.category_id||"",image_url:s.image_url||""})},rs=async(s,l)=>{V({open:!0,type:"product",id:s,name:l})},ce=async(s,l,r)=>{const p=Math.max(0,l+r),{error:_}=await m.from("products").update({stock_quantity:p}).eq("id",s);_?o.error("Failed to update stock"):(o.success("Stock updated successfully"),M())},me=async(s,l,r)=>{const{error:p}=await m.from("delivery_applications").update({status:r}).eq("id",s);if(p){o.error("Failed to update application");return}if(r==="approved"){const{error:_}=await m.from("user_roles").upsert({user_id:l,role:"delivery"},{onConflict:"user_id,role"});if(_){o.error("Failed to assign delivery role");return}}o.success(`Application ${r} successfully`),ne(),O(),W()},ls=async()=>{if(!P.userId){o.error("Please enter a user ID");return}const{error:s}=await m.from("user_roles").insert({user_id:P.userId,role:P.newRole});s?s.code==="23505"?o.error("User already has this role"):o.error("Failed to add role: "+s.message):(o.success("Role added successfully"),B({userId:"",newRole:"user"}),W(),O())},is=async(s,l)=>{V({open:!0,type:"role",id:s,name:l})},ns=async()=>{if(A.type==="product"){const{error:s}=await m.from("products").update({is_active:!1,stock_quantity:0}).eq("id",A.id);s?(xe.error("Product delete error",{error:s}),o.error("Failed to delete product: "+s.message)):(o.success("Product deleted successfully"),M())}else if(A.type==="role"){const{error:s}=await m.from("user_roles").delete().eq("id",A.id);s?o.error("Failed to delete role: "+s.message):(o.success("Role removed successfully"),W(),O())}V({open:!1,type:null,id:"",name:""})},K=()=>{ae(null),b({name:"",description:"",price:"",stock_quantity:"",unit:"piece",category_id:"",image_url:""})},ds=async()=>{await n(),c("/auth")};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border bg-card/80 backdrop-blur-md sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full system control & management"}),e.jsx("p",{className:"text-xs text-muted-foreground md:hidden mt-1",children:ge[D]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(u,{onClick:()=>c("/admin/stock"),variant:"outline",size:"sm",className:"gap-2 flex-1 md:flex-none",children:[e.jsx(Rs,{className:"h-4 w-4"}),"Manage Stock"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 md:flex-none min-w-[140px]",children:[e.jsx(Is,{className:"h-4 w-4 text-muted-foreground hidden md:block"}),e.jsxs(X,{value:D,onValueChange:s=>Qe(s),children:[e.jsx(J,{className:"w-full md:w-[160px]",children:e.jsx(Z,{placeholder:"Select period"})}),e.jsxs(ee,{children:[e.jsx(y,{value:"today",children:"Today"}),e.jsx(y,{value:"7days",children:"Last 7 Days"}),e.jsx(y,{value:"1month",children:"Last 1 Month"}),e.jsx(y,{value:"6months",children:"Last 6 Months"}),e.jsx(y,{value:"1year",children:"Last 1 Year"})]})]})]}),e.jsx(u,{onClick:ds,variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",children:e.jsx(_s,{className:"h-5 w-5"})})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 pb-24",children:[e.jsx("div",{className:"hidden md:flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸ“Š Showing data for: ",e.jsx("span",{className:"font-medium text-foreground",children:ge[D]})]})}),e.jsx(g,{className:`mb-6 ${N.isLocked?"border-red-400 bg-red-50/50 dark:bg-red-950/20":N.paymentStatus==="paid"?"border-green-400 bg-green-50/50 dark:bg-green-950/20":"border-border"}`,children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.isLocked?"bg-red-500":"bg-green-500"}`,children:e.jsx(ue,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Admin Access Control"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.isLocked?N.paymentStatus==="paid"?"ðŸ”” Payment marked as PAID - Confirm to unlock":"ðŸ”’ Admin locked - Waiting for payment":"âœ… Admin access is active"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N.paymentStatus==="paid"&&N.isLocked&&e.jsx(u,{onClick:ss,className:"bg-green-600 hover:bg-green-700 text-white",children:"âœ“ Payment Received - Unlock"}),N.isLocked?N.paymentStatus!=="paid"&&e.jsx(u,{onClick:()=>oe(!1),variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",children:"ðŸ”“ Unlock Without Payment"}):e.jsx(u,{onClick:()=>oe(!0),variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:"ðŸ”’ Lock Admin Access"})]})]})})}),e.jsxs("div",{className:"flex overflow-x-auto pb-6 -mx-4 px-4 gap-4 snap-x snap-mandatory md:grid md:grid-cols-3 lg:grid-cols-6 md:overflow-visible md:pb-0 md:mx-0 md:px-0 mb-6 scrollbar-hide",children:[e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/40 dark:to-green-900/20 border-green-200 dark:border-green-800",children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:"text-xs font-medium text-green-700 dark:text-green-400",children:"ðŸ’° Total Sales"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-green-800 dark:text-green-300",children:["â‚¹",v.revenue.toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-green-600 dark:text-green-500 mt-1",children:"From delivered orders"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-950/40 dark:to-emerald-900/20 border-emerald-200 dark:border-emerald-800",children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ“ˆ Your Profit"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-emerald-800 dark:text-emerald-300",children:["â‚¹",v.profit.toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 mt-1",children:"After â‚¹9/order commission"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-950/40 dark:to-amber-900/20 border-amber-200 dark:border-amber-800",children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:"text-xs font-medium text-amber-700 dark:text-amber-400",children:"ðŸ’³ Pending Pay"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-amber-800 dark:text-amber-300",children:["â‚¹",(v.commissionDeveloper+v.commissionDelivery).toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-amber-600 dark:text-amber-500 mt-1",children:"Dev + Delivery fees"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/40 dark:to-blue-900/20 border-blue-200 dark:border-blue-800",children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:"text-xs font-medium text-blue-700 dark:text-blue-400",children:"ðŸ“¦ All Orders"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-300",children:v.totalOrders}),e.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-500 mt-1",children:"Total received"})]})]}),e.jsxs(g,{className:`min-w-[260px] snap-center bg-gradient-to-br ${v.pendingOrders>0?"from-orange-50 to-orange-100 dark:from-orange-950/40 dark:to-orange-900/20 border-orange-300 dark:border-orange-700":"from-gray-50 to-gray-100 dark:from-gray-950/40 dark:to-gray-900/20 border-gray-200 dark:border-gray-800"}`,children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:`text-xs font-medium ${v.pendingOrders>0?"text-orange-700 dark:text-orange-400":"text-gray-600 dark:text-gray-400"}`,children:"â³ In Progress"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:`text-xl font-bold ${v.pendingOrders>0?"text-orange-800 dark:text-orange-300":"text-gray-700 dark:text-gray-300"}`,children:v.pendingOrders}),e.jsx("p",{className:`text-[10px] mt-1 ${v.pendingOrders>0?"text-orange-600 dark:text-orange-500":"text-gray-500"}`,children:"Being delivered"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-primary/10 to-primary/20 border-primary/30",children:[e.jsx(f,{className:"pb-2 px-3 pt-3",children:e.jsx(j,{className:"text-xs font-medium text-primary",children:"âœ… Delivered"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xl font-bold text-primary",children:v.deliveredOrders}),e.jsx("p",{className:"text-[10px] text-primary/70 mt-1",children:"Completed"})]})]})]}),e.jsxs(Cs,{defaultValue:"products",className:"space-y-4",children:[e.jsx("div",{className:"overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 scrollbar-hide",children:e.jsxs(Ps,{className:"w-auto inline-flex md:grid md:w-full md:grid-cols-5 h-auto p-1",children:[e.jsx(U,{value:"products",className:"px-4 py-2",children:"Products"}),e.jsx(U,{value:"orders",className:"px-4 py-2",children:"Orders"}),e.jsxs(U,{value:"applications",className:"px-4 py-2",children:["Delivery Apps",v.pendingApplications>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-destructive text-destructive-foreground rounded-full",children:v.pendingApplications})]}),e.jsx(U,{value:"users",className:"px-4 py-2",children:"User Management"}),e.jsx(U,{value:"malicious",className:"px-4 py-2",children:"Malicious Activity"})]})}),e.jsxs(F,{value:"products",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(j,{children:q?"Edit Product":"Add New Product"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"name",children:"Product Name *"}),e.jsx(I,{id:"name",value:d.name,onChange:s=>b({...d,name:s.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"category",children:"Category *"}),e.jsxs(X,{value:d.category_id,onValueChange:s=>b({...d,category_id:s}),children:[e.jsx(J,{children:e.jsx(Z,{placeholder:"Select category"})}),e.jsx(ee,{children:R.map(s=>e.jsx(y,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"price",children:"Price (â‚¹) *"}),e.jsx(I,{id:"price",type:"number",value:d.price,onChange:s=>b({...d,price:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx(I,{id:"stock",type:"number",value:d.stock_quantity,onChange:s=>b({...d,stock_quantity:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"unit",children:"Unit"}),e.jsx(I,{id:"unit",value:d.unit,onChange:s=>b({...d,unit:s.target.value}),placeholder:"piece, kg, ltr"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"image",children:"Image URL"}),e.jsx(I,{id:"image",value:d.image_url,onChange:s=>b({...d,image_url:s.target.value}),placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"description",children:"Description"}),e.jsx(ks,{id:"description",value:d.description,onChange:s=>b({...d,description:s.target.value}),placeholder:"Product description",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{onClick:ts,children:q?"Update Product":"Add Product"}),q&&e.jsx(u,{onClick:K,variant:"outline",children:"Cancel"})]})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(j,{children:["All Products (",x.length,")"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:x.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-border rounded-lg hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["â‚¹",s.price," â€¢ ",s.unit]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Stock"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-md px-2 py-1",children:[e.jsx(u,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>ce(s.id,s.stock_quantity,-1),children:e.jsx(ws,{className:"h-3 w-3"})}),e.jsx("span",{className:"font-semibold min-w-[2rem] text-center",children:s.stock_quantity}),e.jsx(u,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>ce(s.id,s.stock_quantity,1),children:e.jsx(As,{className:"h-3 w-3"})})]})]}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>as(s),children:e.jsx(Fs,{className:"h-4 w-4"})}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>rs(s.id,s.name),children:e.jsx(pe,{className:"h-4 w-4"})})]})]},s.id))})})]})]}),e.jsx(F,{value:"orders",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(j,{children:"Recent Orders"})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:z.map(s=>e.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Order #",s.id.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["User: ",s.user_id.slice(0,8)]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.status==="delivered"?"bg-primary/10 text-primary":s.status==="cancelled"||s.status==="rejected"?"bg-destructive/10 text-destructive":"bg-accent/10 text-accent"}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s.delivery_address}),e.jsxs("p",{className:"text-lg font-bold text-foreground",children:["â‚¹",Number(s.total_amount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.created_at).toLocaleString()})]},s.id))})})]})}),e.jsx(F,{value:"applications",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-5 w-5 text-primary"}),"Delivery Partner Applications"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:se.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No applications yet"}):se.map(s=>e.jsxs("div",{className:`p-4 border rounded-lg ${s.status==="pending"?"border-accent bg-accent/5":s.status==="approved"?"border-primary/20 bg-primary/5":"border-destructive/20 bg-destructive/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",s.phone]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vehicle: ",s.vehicle_type]}),s.license_number&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["License: ",s.license_number]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.status==="pending"?"bg-accent text-accent-foreground":s.status==="approved"?"bg-primary text-primary-foreground":"bg-destructive text-destructive-foreground"}`,children:s.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Applied: ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["User ID: ",s.user_id]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",onClick:()=>me(s.id,s.user_id,"approved"),children:"Approve"}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>me(s.id,s.user_id,"rejected"),children:"Reject"})]})]},s.id))})})]})}),e.jsx(F,{value:"payouts",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5 text-indigo-600"}),"Developer Commission Payouts"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:re.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No payout history found."}):re.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-xl bg-muted/20",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg",children:["â‚¹",Number(s.amount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.created_at?new Date(s.created_at).toLocaleDateString():"Unknown Date"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-0.5 text-[10px] rounded-full uppercase font-bold tracking-wider ${s.status==="approved"?"bg-green-100 text-green-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})})]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>ie(s.id,"approved"),children:"Approve"}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>ie(s.id,"rejected"),children:"Reject"})]})]},s.id))})})]})}),e.jsxs(F,{value:"users",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"User Role Management"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(k,{htmlFor:"userId",children:"User ID"}),e.jsx(I,{id:"userId",value:P.userId,onChange:s=>B({...P,userId:s.target.value}),placeholder:"Enter user ID"})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"newRole",children:"New Role"}),e.jsxs(X,{value:P.newRole,onValueChange:s=>B({...P,newRole:s}),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(y,{value:"user",children:"User"}),e.jsx(y,{value:"admin",children:"Admin"}),e.jsx(y,{value:"delivery",children:"Delivery"}),e.jsx(y,{value:"super_admin",children:"Super Admin"})]})]})]})]}),e.jsx(u,{onClick:ls,children:"Add Role"})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(j,{children:"All Users"})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:He.map(s=>e.jsx("div",{className:"p-4 border border-border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["User #",s.user_id.slice(0,8)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",s.user_id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.role==="super_admin"?"bg-destructive/10 text-destructive":s.role==="admin"?"bg-accent/10 text-accent":s.role==="delivery"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.role}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>is(s.id,s.user_id),children:e.jsx(pe,{className:"h-4 w-4 text-destructive"})})]})]})},s.id))})})]})]}),e.jsx(F,{value:"malicious",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-5 w-5 text-destructive"}),"Malicious Activities"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:L.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No malicious activities detected"}):L.map(s=>e.jsxs("div",{className:"p-4 border border-destructive/20 bg-destructive/5 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.activity_type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.detected_at||"").toLocaleString()})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[s.user_id&&e.jsxs("span",{children:["User ID: ",s.user_id.slice(0,8),"..."]}),s.delivery_person_id&&e.jsxs("span",{children:["Delivery: ",s.delivery_person_id.slice(0,8),"..."]}),s.order_id&&e.jsxs("span",{children:["Order ID: ",s.order_id.slice(0,8),"..."]})]})]},s.id))})})]})})]})]}),e.jsx(Hs,{open:A.open,onOpenChange:s=>!s&&V({open:!1,type:null,id:"",name:""}),children:e.jsxs(Me,{children:[e.jsxs($e,{children:[e.jsx(ze,{children:"Are you sure?"}),e.jsx(Ve,{children:A.type==="product"?`This will permanently delete the product "${A.name}". This action cannot be undone.`:`This will remove the role for user "${A.name.slice(0,8)}...". This action cannot be undone.`})]}),e.jsxs(Ue,{children:[e.jsx(Ye,{children:"Cancel"}),e.jsx(We,{onClick:ns,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{tt as default};
