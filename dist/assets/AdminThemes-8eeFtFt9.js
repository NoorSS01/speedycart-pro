import{p as o,u as z,ah as B,a as P,r,s as c,j as e,S as x,B as w,A as E,ag as F,C as n,c as i,J as L,m as h,ai as C,aj as R,i as l}from"./index-CWmUW0Oc.js";import{A as Z}from"./AdminBottomNav-BKUm4YDC.js";import"./boxes-b2j2-WXi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=o("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=o("Flower2",[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=o("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=o("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);function U(){const{user:u,userRole:p,loading:f}=z(),{refreshTheme:A}=B(),d=P(),[t,T]=r.useState([]),[M,S]=r.useState(!0),[m,j]=r.useState(null),y=p==="admin"||p==="super_admin";r.useEffect(()=>{if(!f){if(!u||!y){d("/");return}g()}},[u,f,y,d]);const g=async()=>{try{const{data:s}=await c.from("themes").select("*").order("type",{ascending:!0}).order("name",{ascending:!0});s&&T(s)}catch(s){console.error("Error fetching themes:",s)}S(!1)},v=async(s,q)=>{j(s);try{q?(await c.from("themes").update({is_active:!1}).neq("id",s),await c.from("themes").update({is_active:!0}).eq("id",s),h.success("Theme activated")):(await c.from("themes").update({is_active:!1}).eq("id",s),h.success("Theme deactivated")),await g(),await A()}catch{h.error("Failed to update theme")}j(null)},N=s=>{switch(s){case"snowfall":return e.jsx(G,{className:"h-5 w-5"});case"sparkles":return e.jsx(R,{className:"h-5 w-5"});case"rain":return e.jsx(J,{className:"h-5 w-5"});case"petals":return e.jsx(D,{className:"h-5 w-5"});case"leaves":return e.jsx(C,{className:"h-5 w-5"});case"confetti":return e.jsx(C,{className:"h-5 w-5"});default:return e.jsx(_,{className:"h-5 w-5"})}},b=s=>{switch(s){case"seasonal":return e.jsx(l,{variant:"secondary",children:"Seasonal"});case"festival":return e.jsx(l,{className:"bg-amber-500",children:"Festival"});case"custom":return e.jsx(l,{variant:"outline",children:"Custom"});default:return e.jsx(l,{variant:"outline",children:s})}};if(M)return e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-3",children:[e.jsx(x,{className:"h-8 w-8"}),e.jsx(x,{className:"h-6 w-40"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6 space-y-4",children:[1,2,3,4].map(s=>e.jsx(x,{className:"h-28 rounded-xl"},s))})]});const a=t.find(s=>s.is_active),k=t.filter(s=>!s.is_active);return e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-3",children:[e.jsx(w,{variant:"ghost",size:"icon",onClick:()=>d("/admin"),children:e.jsx(E,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold",children:"Theme Manager"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Professional seasonal themes"})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[a&&e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-green-500"}),"Currently Active"]}),e.jsx(n,{className:"border-green-500 border-2",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg",style:{backgroundColor:a.primary_color},children:N(a.animation_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b(a.type),a.animation_type&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.animation_type," animation"]})]})]})]}),e.jsx(L,{checked:!0,disabled:m===a.id,onCheckedChange:()=>v(a.id,!1)})]}),a.promo_badge_text&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Promo badge:"}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full text-white font-medium",style:{backgroundColor:a.promo_badge_color||a.primary_color},children:a.promo_badge_text})]})]})})]}),!a&&e.jsx(n,{className:"border-dashed",children:e.jsxs(i,{className:"py-8 text-center",children:[e.jsx(_,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No theme currently active"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Activate a theme below to give your store a seasonal look"})]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold mb-3 text-sm text-muted-foreground",children:["Available Themes (",k.length,")"]}),e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsx(n,{className:"hover:shadow-md transition-shadow",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white shadow",style:{backgroundColor:s.primary_color},children:N(s.animation_type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:b(s.type)})]})]}),e.jsx(w,{size:"sm",variant:"outline",disabled:m===s.id,onClick:()=>v(s.id,!0),children:m===s.id?"Activating...":"Activate"})]})})},s.id))})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold mb-3 text-sm text-muted-foreground",children:"Color Palettes"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.slice(0,4).map(s=>e.jsxs(n,{className:"overflow-hidden",children:[e.jsxs("div",{className:"h-4 flex",children:[e.jsx("div",{className:"flex-1",style:{backgroundColor:s.primary_color}}),e.jsx("div",{className:"flex-1",style:{backgroundColor:s.secondary_color}}),e.jsx("div",{className:"flex-1",style:{backgroundColor:s.accent_color}})]}),e.jsx(i,{className:"p-2",children:e.jsx("p",{className:"text-xs font-medium truncate",children:s.name})})]},s.id))})]})]}),e.jsx(Z,{})]})}export{U as default};
