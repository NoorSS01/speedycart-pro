import{aw as gs,ax as ge,r as i,j as e,ay as hs,az as fs,aA as he,aB as js,aC as vs,aD as ys,aE as bs,aF as Ns,aG as fe,aH as _s,aI as As,aJ as ws,aq as D,aK as je,u as Ds,a as ks,s as d,B as p,a4 as Q,a5 as X,a6 as Z,a7 as ee,a8 as y,N as Ss,C as g,c as h,V as me,D as j,E as v,d as Cs,e as Ps,f as $,g as U,G as _,I as R,ac as Os,Y as Rs,O as Ts,_ as xe,T as Fs,W as Is,m as c}from"./index-CWmUW0Oc.js";import{B as Es}from"./boxes-b2j2-WXi.js";import{C as Ls}from"./calendar-dM34qfdG.js";import{S as Ms}from"./square-pen-ePWdBnNP.js";var ve="AlertDialog",[qs,at]=gs(ve,[ge]),A=ge(),ye=r=>{const{__scopeAlertDialog:t,...a}=r,l=A(t);return e.jsx(_s,{...l,...a,modal:!0})};ye.displayName=ve;var $s="AlertDialogTrigger",Us=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,m=A(a);return e.jsx(hs,{...m,...l,ref:t})});Us.displayName=$s;var zs="AlertDialogPortal",be=r=>{const{__scopeAlertDialog:t,...a}=r,l=A(t);return e.jsx(As,{...l,...a})};be.displayName=zs;var Hs="AlertDialogOverlay",Ne=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,m=A(a);return e.jsx(fs,{...m,...l,ref:t})});Ne.displayName=Hs;var T="AlertDialogContent",[Vs,Ys]=qs(T),Bs=ws("AlertDialogContent"),_e=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,children:l,...m}=r,F=A(a),P=i.useRef(null),Y=he(t,P),z=i.useRef(null);return e.jsx(js,{contentName:T,titleName:Ae,docsSlug:"alert-dialog",children:e.jsx(Vs,{scope:a,cancelRef:z,children:e.jsxs(vs,{role:"alertdialog",...F,...m,ref:Y,onOpenAutoFocus:ys(m.onOpenAutoFocus,k=>{var I;k.preventDefault(),(I=z.current)==null||I.focus({preventScroll:!0})}),onPointerDownOutside:k=>k.preventDefault(),onInteractOutside:k=>k.preventDefault(),children:[e.jsx(Bs,{children:l}),e.jsx(Ws,{contentRef:P})]})})})});_e.displayName=T;var Ae="AlertDialogTitle",we=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,m=A(a);return e.jsx(bs,{...m,...l,ref:t})});we.displayName=Ae;var De="AlertDialogDescription",ke=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,m=A(a);return e.jsx(Ns,{...m,...l,ref:t})});ke.displayName=De;var Gs="AlertDialogAction",Se=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,m=A(a);return e.jsx(fe,{...m,...l,ref:t})});Se.displayName=Gs;var Ce="AlertDialogCancel",Pe=i.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...l}=r,{cancelRef:m}=Ys(Ce,a),F=A(a),P=he(t,m);return e.jsx(fe,{...F,...l,ref:P})});Pe.displayName=Ce;var Ws=({contentRef:r})=>{const t=`\`${T}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${T}\` by passing a \`${De}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${T}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var l;document.getElementById((l=r.current)==null?void 0:l.getAttribute("aria-describedby"))||console.warn(t)},[t,r]),null},Js=ye,Ks=be,Oe=Ne,Re=_e,Te=Se,Fe=Pe,Ie=we,Ee=ke;const Qs=Js,Xs=Ks,Le=i.forwardRef(({className:r,...t},a)=>e.jsx(Oe,{className:D("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:a}));Le.displayName=Oe.displayName;const Me=i.forwardRef(({className:r,...t},a)=>e.jsxs(Xs,{children:[e.jsx(Le,{}),e.jsx(Re,{ref:a,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t})]}));Me.displayName=Re.displayName;const qe=({className:r,...t})=>e.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",r),...t});qe.displayName="AlertDialogHeader";const $e=({className:r,...t})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t});$e.displayName="AlertDialogFooter";const Ue=i.forwardRef(({className:r,...t},a)=>e.jsx(Ie,{ref:a,className:D("text-lg font-semibold",r),...t}));Ue.displayName=Ie.displayName;const ze=i.forwardRef(({className:r,...t},a)=>e.jsx(Ee,{ref:a,className:D("text-sm text-muted-foreground",r),...t}));ze.displayName=Ee.displayName;const He=i.forwardRef(({className:r,...t},a)=>e.jsx(Te,{ref:a,className:D(je(),r),...t}));He.displayName=Te.displayName;const Ve=i.forwardRef(({className:r,...t},a)=>e.jsx(Fe,{ref:a,className:D(je({variant:"outline"}),"mt-2 sm:mt-0",r),...t}));Ve.displayName=Fe.displayName;const ue=r=>{const t=new Date,a=new Date(t);switch(r){case"today":a.setHours(0,0,0,0);break;case"7days":a.setDate(t.getDate()-7),a.setHours(0,0,0,0);break;case"1month":a.setMonth(t.getMonth()-1),a.setHours(0,0,0,0);break;case"6months":a.setMonth(t.getMonth()-6),a.setHours(0,0,0,0);break;case"1year":a.setFullYear(t.getFullYear()-1),a.setHours(0,0,0,0);break}return a},pe={today:"Today","7days":"Last 7 Days","1month":"Last 1 Month","6months":"Last 6 Months","1year":"Last 1 Year"};function rt(){const{user:r,loading:t,signOut:a}=Ds(),l=ks(),[m,F]=i.useState([]),[P,Y]=i.useState([]),[z,k]=i.useState([]),[I,Ye]=i.useState([]),[Be,Ge]=i.useState([]),[se,We]=i.useState([]),[f,Je]=i.useState({totalOrders:0,pendingOrders:0,deliveredOrders:0,revenue:0,totalUsers:0,deliveryPersons:0,pendingApplications:0,commissionDeveloper:0,commissionDelivery:0,profit:0}),[E,te]=i.useState(null),[o,b]=i.useState({name:"",description:"",price:"",stock_quantity:"",unit:"piece",category_id:"",image_url:""}),[S,B]=i.useState({userId:"",newRole:"user"}),[w,H]=i.useState({open:!1,type:null,id:"",name:""}),[O,Ke]=i.useState("today"),[N,Qe]=i.useState({isLocked:!1,paymentStatus:"none",paidAt:null});i.useEffect(()=>{if(!t){if(!r){l("/auth");return}Ze(),Xe()}},[r,t,l]),i.useEffect(()=>{r&&(W(),M())},[O]);const Xe=()=>{const s=d.channel("superadmin-orders").on("postgres_changes",{event:"*",schema:"public",table:"orders"},W).subscribe(),n=d.channel("superadmin-malicious").on("postgres_changes",{event:"*",schema:"public",table:"malicious_activities"},re).subscribe();return()=>{d.removeChannel(s),d.removeChannel(n)}},Ze=async()=>{await Promise.all([L(),ss(),W(),re(),V(),ne(),M(),G()])},G=async()=>{const s=d,{data:n,error:x}=await s.from("admin_settings").select("*").eq("id","00000000-0000-0000-0000-000000000001").single();n&&!x&&Qe({isLocked:n.is_locked||!1,paymentStatus:n.payment_status||"none",paidAt:n.paid_at})},ae=async s=>{const n=d,{error:x}=await n.from("admin_settings").update({is_locked:s,payment_status:s?"pending":"none",locked_at:s?new Date().toISOString():null,paid_at:null,confirmed_at:null,updated_at:new Date().toISOString()}).eq("id","00000000-0000-0000-0000-000000000001");x?c.error("Failed to update admin lock status"):(c.success(s?"Admin access locked! Payment required.":"Admin access unlocked!"),G())},es=async()=>{const s=d,{error:n}=await s.from("admin_settings").update({is_locked:!1,payment_status:"none",confirmed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id","00000000-0000-0000-0000-000000000001");n?c.error("Failed to confirm payment"):(c.success("Payment confirmed! Admin access restored."),G())},L=async()=>{const{data:s}=await d.from("products").select("*").order("name");s&&F(s)},ss=async()=>{const{data:s}=await d.from("categories").select("id, name").order("name");s&&Y(s)},W=async()=>{const s=ue(O).toISOString(),{data:n}=await d.from("orders").select("*").gte("created_at",s).order("created_at",{ascending:!1}).limit(50);n&&k(n)},re=async()=>{const{data:s}=await d.from("malicious_activities").select("*").order("detected_at",{ascending:!1});s&&Ye(s)},V=async()=>{const{data:s}=await d.from("user_roles").select("*").order("created_at",{ascending:!1});s&&Ge(s)},ne=async()=>{const{data:s}=await d.from("delivery_applications").select("*").order("created_at",{ascending:!1});s&&We(s)},M=async()=>{const s=ue(O).toISOString(),{data:n}=await d.from("orders").select("status, total_amount, created_at").gte("created_at",s),{data:x}=await d.from("user_roles").select("role"),{data:C}=await d.from("delivery_applications").select("status");if(n){const q=n.length,ds=n.filter(u=>u.status==="pending"||u.status==="confirmed"||u.status==="out_for_delivery").length,K=n.filter(u=>u.status==="delivered").length,oe=n.filter(u=>u.status==="delivered").reduce((u,ps)=>u+Number(ps.total_amount),0),cs=(x==null?void 0:x.filter(u=>u.role==="user").length)||0,ms=(x==null?void 0:x.filter(u=>u.role==="delivery").length)||0,xs=(C==null?void 0:C.filter(u=>u.status==="pending").length)||0,de=K*4,ce=K*5,us=oe-de-ce;Je({totalOrders:q,pendingOrders:ds,deliveredOrders:K,revenue:oe,totalUsers:cs,deliveryPersons:ms,pendingApplications:xs,commissionDeveloper:de,commissionDelivery:ce,profit:us})}},ts=async()=>{if(!o.name||!o.price||!o.category_id){c.error("Please fill all required fields");return}const s={name:o.name,description:o.description||null,price:parseFloat(o.price),stock_quantity:parseInt(o.stock_quantity)||0,unit:o.unit,category_id:o.category_id,image_url:o.image_url||null,is_active:!0};if(E){const{error:n}=await d.from("products").update(s).eq("id",E.id);n?c.error("Failed to update product"):(c.success("Product updated successfully"),J(),L())}else{const{error:n}=await d.from("products").insert(s);n?c.error("Failed to create product"):(c.success("Product created successfully"),J(),L())}},as=s=>{var n;te(s),b({name:s.name,description:s.description||"",price:s.price.toString(),stock_quantity:((n=s.stock_quantity)==null?void 0:n.toString())||"0",unit:s.unit||"piece",category_id:s.category_id||"",image_url:s.image_url||""})},rs=async(s,n)=>{H({open:!0,type:"product",id:s,name:n})},ie=async(s,n,x)=>{const C=Math.max(0,n+x),{error:q}=await d.from("products").update({stock_quantity:C}).eq("id",s);q?c.error("Failed to update stock"):(c.success("Stock updated successfully"),L())},le=async(s,n,x)=>{const{error:C}=await d.from("delivery_applications").update({status:x}).eq("id",s);if(C){c.error("Failed to update application");return}if(x==="approved"){const{error:q}=await d.from("user_roles").upsert({user_id:n,role:"delivery"},{onConflict:"user_id,role"});if(q){c.error("Failed to assign delivery role");return}}c.success(`Application ${x} successfully`),ne(),M(),V()},ns=async()=>{if(!S.userId){c.error("Please enter a user ID");return}const{error:s}=await d.from("user_roles").insert({user_id:S.userId,role:S.newRole});s?s.code==="23505"?c.error("User already has this role"):c.error("Failed to add role: "+s.message):(c.success("Role added successfully"),B({userId:"",newRole:"user"}),V(),M())},is=async(s,n)=>{H({open:!0,type:"role",id:s,name:n})},ls=async()=>{if(w.type==="product"){const{error:s}=await d.from("products").update({is_active:!1,stock_quantity:0}).eq("id",w.id);s?(console.error("Product delete error",s),c.error("Failed to delete product: "+s.message)):(c.success("Product deleted successfully"),L())}else if(w.type==="role"){const{error:s}=await d.from("user_roles").delete().eq("id",w.id);s?c.error("Failed to delete role: "+s.message):(c.success("Role removed successfully"),V(),M())}H({open:!1,type:null,id:"",name:""})},J=()=>{te(null),b({name:"",description:"",price:"",stock_quantity:"",unit:"piece",category_id:"",image_url:""})},os=async()=>{await a(),l("/auth")};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border bg-card/80 backdrop-blur-md sticky top-0 z-50 supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full system control & management"}),e.jsx("p",{className:"text-xs text-muted-foreground md:hidden mt-1",children:pe[O]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(p,{onClick:()=>l("/admin/stock"),variant:"outline",size:"sm",className:"gap-2 flex-1 md:flex-none",children:[e.jsx(Es,{className:"h-4 w-4"}),"Manage Stock"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 md:flex-none min-w-[140px]",children:[e.jsx(Ls,{className:"h-4 w-4 text-muted-foreground hidden md:block"}),e.jsxs(Q,{value:O,onValueChange:s=>Ke(s),children:[e.jsx(X,{className:"w-full md:w-[160px]",children:e.jsx(Z,{placeholder:"Select period"})}),e.jsxs(ee,{children:[e.jsx(y,{value:"today",children:"Today"}),e.jsx(y,{value:"7days",children:"Last 7 Days"}),e.jsx(y,{value:"1month",children:"Last 1 Month"}),e.jsx(y,{value:"6months",children:"Last 6 Months"}),e.jsx(y,{value:"1year",children:"Last 1 Year"})]})]})]}),e.jsx(p,{onClick:os,variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",children:e.jsx(Ss,{className:"h-5 w-5"})})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 pb-24",children:[e.jsx("div",{className:"hidden md:flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸ“Š Showing data for: ",e.jsx("span",{className:"font-medium text-foreground",children:pe[O]})]})}),e.jsx(g,{className:`mb-6 ${N.isLocked?"border-red-400 bg-red-50/50 dark:bg-red-950/20":N.paymentStatus==="paid"?"border-green-400 bg-green-50/50 dark:bg-green-950/20":"border-border"}`,children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N.isLocked?"bg-red-500":"bg-green-500"}`,children:e.jsx(me,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Admin Access Control"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.isLocked?N.paymentStatus==="paid"?"ðŸ”” Payment marked as PAID - Confirm to unlock":"ðŸ”’ Admin locked - Waiting for payment":"âœ… Admin access is active"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N.paymentStatus==="paid"&&N.isLocked&&e.jsx(p,{onClick:es,className:"bg-green-600 hover:bg-green-700 text-white",children:"âœ“ Payment Received - Unlock"}),N.isLocked?N.paymentStatus!=="paid"&&e.jsx(p,{onClick:()=>ae(!1),variant:"outline",className:"border-green-500 text-green-600 hover:bg-green-50",children:"ðŸ”“ Unlock Without Payment"}):e.jsx(p,{onClick:()=>ae(!0),variant:"destructive",className:"bg-red-600 hover:bg-red-700",children:"ðŸ”’ Lock Admin Access"})]})]})})}),e.jsxs("div",{className:"flex overflow-x-auto pb-6 -mx-4 px-4 gap-4 snap-x snap-mandatory md:grid md:grid-cols-3 lg:grid-cols-6 md:overflow-visible md:pb-0 md:mx-0 md:px-0 mb-6 scrollbar-hide",children:[e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/40 dark:to-green-900/20 border-green-200 dark:border-green-800",children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:"text-xs font-medium text-green-700 dark:text-green-400",children:"ðŸ’° Total Sales"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-green-800 dark:text-green-300",children:["â‚¹",f.revenue.toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-green-600 dark:text-green-500 mt-1",children:"From delivered orders"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-950/40 dark:to-emerald-900/20 border-emerald-200 dark:border-emerald-800",children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400",children:"ðŸ“ˆ Your Profit"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-emerald-800 dark:text-emerald-300",children:["â‚¹",f.profit.toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 mt-1",children:"After â‚¹9/order commission"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-950/40 dark:to-amber-900/20 border-amber-200 dark:border-amber-800",children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:"text-xs font-medium text-amber-700 dark:text-amber-400",children:"ðŸ’³ Pending Pay"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsxs("p",{className:"text-xl font-bold text-amber-800 dark:text-amber-300",children:["â‚¹",(f.commissionDeveloper+f.commissionDelivery).toFixed(0)]}),e.jsx("p",{className:"text-[10px] text-amber-600 dark:text-amber-500 mt-1",children:"Dev + Delivery fees"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/40 dark:to-blue-900/20 border-blue-200 dark:border-blue-800",children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:"text-xs font-medium text-blue-700 dark:text-blue-400",children:"ðŸ“¦ All Orders"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xl font-bold text-blue-800 dark:text-blue-300",children:f.totalOrders}),e.jsx("p",{className:"text-[10px] text-blue-600 dark:text-blue-500 mt-1",children:"Total received"})]})]}),e.jsxs(g,{className:`min-w-[260px] snap-center bg-gradient-to-br ${f.pendingOrders>0?"from-orange-50 to-orange-100 dark:from-orange-950/40 dark:to-orange-900/20 border-orange-300 dark:border-orange-700":"from-gray-50 to-gray-100 dark:from-gray-950/40 dark:to-gray-900/20 border-gray-200 dark:border-gray-800"}`,children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:`text-xs font-medium ${f.pendingOrders>0?"text-orange-700 dark:text-orange-400":"text-gray-600 dark:text-gray-400"}`,children:"â³ In Progress"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:`text-xl font-bold ${f.pendingOrders>0?"text-orange-800 dark:text-orange-300":"text-gray-700 dark:text-gray-300"}`,children:f.pendingOrders}),e.jsx("p",{className:`text-[10px] mt-1 ${f.pendingOrders>0?"text-orange-600 dark:text-orange-500":"text-gray-500"}`,children:"Being delivered"})]})]}),e.jsxs(g,{className:"min-w-[260px] snap-center bg-gradient-to-br from-primary/10 to-primary/20 border-primary/30",children:[e.jsx(j,{className:"pb-2 px-3 pt-3",children:e.jsx(v,{className:"text-xs font-medium text-primary",children:"âœ… Delivered"})}),e.jsxs(h,{className:"px-3 pb-3",children:[e.jsx("p",{className:"text-xl font-bold text-primary",children:f.deliveredOrders}),e.jsx("p",{className:"text-[10px] text-primary/70 mt-1",children:"Completed"})]})]})]}),e.jsxs(Cs,{defaultValue:"products",className:"space-y-4",children:[e.jsx("div",{className:"overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 scrollbar-hide",children:e.jsxs(Ps,{className:"w-auto inline-flex md:grid md:w-full md:grid-cols-5 h-auto p-1",children:[e.jsx($,{value:"products",className:"px-4 py-2",children:"Products"}),e.jsx($,{value:"orders",className:"px-4 py-2",children:"Orders"}),e.jsxs($,{value:"applications",className:"px-4 py-2",children:["Delivery Apps",f.pendingApplications>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-destructive text-destructive-foreground rounded-full",children:f.pendingApplications})]}),e.jsx($,{value:"users",className:"px-4 py-2",children:"User Management"}),e.jsx($,{value:"malicious",className:"px-4 py-2",children:"Malicious Activity"})]})}),e.jsxs(U,{value:"products",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(v,{children:E?"Edit Product":"Add New Product"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",children:"Product Name *"}),e.jsx(R,{id:"name",value:o.name,onChange:s=>b({...o,name:s.target.value}),placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"category",children:"Category *"}),e.jsxs(Q,{value:o.category_id,onValueChange:s=>b({...o,category_id:s}),children:[e.jsx(X,{children:e.jsx(Z,{placeholder:"Select category"})}),e.jsx(ee,{children:P.map(s=>e.jsx(y,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"price",children:"Price (â‚¹) *"}),e.jsx(R,{id:"price",type:"number",value:o.price,onChange:s=>b({...o,price:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx(R,{id:"stock",type:"number",value:o.stock_quantity,onChange:s=>b({...o,stock_quantity:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"unit",children:"Unit"}),e.jsx(R,{id:"unit",value:o.unit,onChange:s=>b({...o,unit:s.target.value}),placeholder:"piece, kg, ltr"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"image",children:"Image URL"}),e.jsx(R,{id:"image",value:o.image_url,onChange:s=>b({...o,image_url:s.target.value}),placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(Os,{id:"description",value:o.description,onChange:s=>b({...o,description:s.target.value}),placeholder:"Product description",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{onClick:ts,children:E?"Update Product":"Add Product"}),E&&e.jsx(p,{onClick:J,variant:"outline",children:"Cancel"})]})]})]}),e.jsxs(g,{children:[e.jsx(j,{children:e.jsxs(v,{children:["All Products (",m.length,")"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border border-border rounded-lg hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["â‚¹",s.price," â€¢ ",s.unit]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Stock"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-md px-2 py-1",children:[e.jsx(p,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>ie(s.id,s.stock_quantity,-1),children:e.jsx(Rs,{className:"h-3 w-3"})}),e.jsx("span",{className:"font-semibold min-w-[2rem] text-center",children:s.stock_quantity}),e.jsx(p,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>ie(s.id,s.stock_quantity,1),children:e.jsx(Ts,{className:"h-3 w-3"})})]})]}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>as(s),children:e.jsx(Ms,{className:"h-4 w-4"})}),e.jsx(p,{size:"sm",variant:"destructive",onClick:()=>rs(s.id,s.name),children:e.jsx(xe,{className:"h-4 w-4"})})]})]},s.id))})})]})]}),e.jsx(U,{value:"orders",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(v,{children:"Recent Orders"})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:z.map(s=>e.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["Order #",s.id.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["User: ",s.user_id.slice(0,8)]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.status==="delivered"?"bg-primary/10 text-primary":s.status==="cancelled"||s.status==="rejected"?"bg-destructive/10 text-destructive":"bg-accent/10 text-accent"}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:s.delivery_address}),e.jsxs("p",{className:"text-lg font-bold text-foreground",children:["â‚¹",Number(s.total_amount).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.created_at).toLocaleString()})]},s.id))})})]})}),e.jsx(U,{value:"applications",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-5 w-5 text-primary"}),"Delivery Partner Applications"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:se.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No applications yet"}):se.map(s=>e.jsxs("div",{className:`p-4 border rounded-lg ${s.status==="pending"?"border-accent bg-accent/5":s.status==="approved"?"border-primary/20 bg-primary/5":"border-destructive/20 bg-destructive/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Phone: ",s.phone]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Vehicle: ",s.vehicle_type]}),s.license_number&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["License: ",s.license_number]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.status==="pending"?"bg-accent text-accent-foreground":s.status==="approved"?"bg-primary text-primary-foreground":"bg-destructive text-destructive-foreground"}`,children:s.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Applied: ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["User ID: ",s.user_id]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",onClick:()=>le(s.id,s.user_id,"approved"),children:"Approve"}),e.jsx(p,{size:"sm",variant:"destructive",onClick:()=>le(s.id,s.user_id,"rejected"),children:"Reject"})]})]},s.id))})})]})}),e.jsxs(U,{value:"users",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"User Role Management"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(_,{htmlFor:"userId",children:"User ID"}),e.jsx(R,{id:"userId",value:S.userId,onChange:s=>B({...S,userId:s.target.value}),placeholder:"Enter user ID"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"newRole",children:"New Role"}),e.jsxs(Q,{value:S.newRole,onValueChange:s=>B({...S,newRole:s}),children:[e.jsx(X,{children:e.jsx(Z,{})}),e.jsxs(ee,{children:[e.jsx(y,{value:"user",children:"User"}),e.jsx(y,{value:"admin",children:"Admin"}),e.jsx(y,{value:"delivery",children:"Delivery"}),e.jsx(y,{value:"super_admin",children:"Super Admin"})]})]})]})]}),e.jsx(p,{onClick:ns,children:"Add Role"})]})]}),e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(v,{children:"All Users"})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:Be.map(s=>e.jsx("div",{className:"p-4 border border-border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-foreground",children:["User #",s.user_id.slice(0,8)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ID: ",s.user_id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${s.role==="super_admin"?"bg-destructive/10 text-destructive":s.role==="admin"?"bg-accent/10 text-accent":s.role==="delivery"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:s.role}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>is(s.id,s.user_id),children:e.jsx(xe,{className:"h-4 w-4 text-destructive"})})]})]})},s.id))})})]})]}),e.jsx(U,{value:"malicious",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(j,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5 text-destructive"}),"Malicious Activities"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-2",children:I.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No malicious activities detected"}):I.map(s=>e.jsxs("div",{className:"p-4 border border-destructive/20 bg-destructive/5 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.activity_type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.detected_at||"").toLocaleString()})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[s.user_id&&e.jsxs("span",{children:["User ID: ",s.user_id.slice(0,8),"..."]}),s.delivery_person_id&&e.jsxs("span",{children:["Delivery: ",s.delivery_person_id.slice(0,8),"..."]}),s.order_id&&e.jsxs("span",{children:["Order ID: ",s.order_id.slice(0,8),"..."]})]})]},s.id))})})]})})]})]}),e.jsx(Qs,{open:w.open,onOpenChange:s=>!s&&H({open:!1,type:null,id:"",name:""}),children:e.jsxs(Me,{children:[e.jsxs(qe,{children:[e.jsx(Ue,{children:"Are you sure?"}),e.jsx(ze,{children:w.type==="product"?`This will permanently delete the product "${w.name}". This action cannot be undone.`:`This will remove the role for user "${w.name.slice(0,8)}...". This action cannot be undone.`})]}),e.jsxs($e,{children:[e.jsx(Ve,{children:"Cancel"}),e.jsx(He,{onClick:ls,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}export{rt as default};
