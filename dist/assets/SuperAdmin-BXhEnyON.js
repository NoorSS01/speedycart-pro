import{ab as W,az as h,r as e,j as o,aA as J,aB as K,aC as R,aD as Q,aE as X,aF as Z,aG as ee,aH as te,aI as b,aJ as ae,aK as se,ad as A,aL as w,u as oe,a as re,s as m}from"./index-G6_Ui0pm.js";var ne="AlertDialog",[le,be]=W(ne,[h]),u=h(),ie="AlertDialogTrigger",ce=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,l=u(s);return o.jsx(J,{...l,...r,ref:a})});ce.displayName=ie;var de="AlertDialogPortal",C=t=>{const{__scopeAlertDialog:a,...s}=t,r=u(a);return o.jsx(ae,{...r,...s})};C.displayName=de;var ue="AlertDialogOverlay",O=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,l=u(s);return o.jsx(K,{...l,...r,ref:a})});O.displayName=ue;var y="AlertDialogContent",[pe,ge]=le(y),fe=se("AlertDialogContent"),E=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,children:r,...l}=t,_=u(s),p=e.useRef(null),g=R(a,p),N=e.useRef(null);return o.jsx(Q,{contentName:y,titleName:j,docsSlug:"alert-dialog",children:o.jsx(pe,{scope:s,cancelRef:N,children:o.jsxs(X,{role:"alertdialog",..._,...l,ref:g,onOpenAutoFocus:Z(l.onOpenAutoFocus,f=>{var S;f.preventDefault(),(S=N.current)==null||S.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[o.jsx(fe,{children:r}),o.jsx(ye,{contentRef:p})]})})})});E.displayName=y;var j="AlertDialogTitle",P=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,l=u(s);return o.jsx(ee,{...l,...r,ref:a})});P.displayName=j;var T="AlertDialogDescription",I=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,l=u(s);return o.jsx(te,{...l,...r,ref:a})});I.displayName=T;var me="AlertDialogAction",k=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,l=u(s);return o.jsx(b,{...l,...r,ref:a})});k.displayName=me;var M="AlertDialogCancel",$=e.forwardRef((t,a)=>{const{__scopeAlertDialog:s,...r}=t,{cancelRef:l}=ge(M,s),_=u(s),p=R(a,l);return o.jsx(b,{..._,...r,ref:p})});$.displayName=M;var ye=({contentRef:t})=>{const a=`\`${y}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${y}\` by passing a \`${T}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${y}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return e.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},Ae=C,L=O,F=E,z=k,q=$,G=P,Y=I;const ve=Ae,H=e.forwardRef(({className:t,...a},s)=>o.jsx(L,{className:A("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s}));H.displayName=L.displayName;const De=e.forwardRef(({className:t,...a},s)=>o.jsxs(ve,{children:[o.jsx(H,{}),o.jsx(F,{ref:s,className:A("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]}));De.displayName=F.displayName;const _e=e.forwardRef(({className:t,...a},s)=>o.jsx(G,{ref:s,className:A("text-lg font-semibold",t),...a}));_e.displayName=G.displayName;const Se=e.forwardRef(({className:t,...a},s)=>o.jsx(Y,{ref:s,className:A("text-sm text-muted-foreground",t),...a}));Se.displayName=Y.displayName;const Ne=e.forwardRef(({className:t,...a},s)=>o.jsx(z,{ref:s,className:A(w(),t),...a}));Ne.displayName=z.displayName;const xe=e.forwardRef(({className:t,...a},s)=>o.jsx(q,{ref:s,className:A(w({variant:"outline"}),"mt-2 sm:mt-0",t),...a}));xe.displayName=q.displayName;function we(){const{user:t,loading:a,signOut:s}=oe();re(),e.useState([]),e.useState([]);const[r,l]=e.useState([]);e.useState([]),e.useState([]),e.useState([]);const[_,p]=e.useState({totalOrders:0,pendingOrders:0,deliveredOrders:0,revenue:0,totalUsers:0,deliveryPersons:0,pendingApplications:0,commissionDeveloper:0,commissionDelivery:0,profit:0});e.useState(null),e.useState({name:"",description:"",price:"",stock_quantity:"",unit:"piece",category_id:"",image_url:""}),e.useState({userId:"",newRole:"user"}),e.useState({open:!1,type:null,id:"",name:""});const[g,N]=e.useState("today"),[f,S]=e.useState({isLocked:!1,paymentStatus:"none",paidAt:null}),[he,B]=e.useState([]),U=e.useCallback(async()=>{const{data:n,error:c}=await m.from("payouts").select("id, amount, status, type, transaction_date, created_at, payer_id").eq("type","developer_commission").order("created_at",{ascending:!1});n&&B(n),c&&console.error("Error fetching payouts",c)},[]);e.useEffect(()=>{t&&!a&&U()},[t,a]),e.useCallback(async()=>{const n=m,{data:c,error:d}=await n.from("admin_settings").select("*").eq("key","admin_lockout").single();if(!d&&c){const i=c;S({isLocked:(i==null?void 0:i.is_locked)||!1,paymentStatus:(i==null?void 0:i.payment_status)||"none",paidAt:(i==null?void 0:i.paid_at)||null})}},[]),e.useCallback(async()=>{const n=new Date;n.setHours(0,0,0,0),g==="7days"?n.setDate(n.getDate()-7):g==="1month"?n.setMonth(n.getMonth()-1):g==="1year"&&n.setFullYear(n.getFullYear()-1);const[c,d,i]=await Promise.all([m.from("orders").select("total_amount, status, created_at").gte("created_at",n.toISOString()),m.from("profiles").select("id, role, created_at").gte("created_at",n.toISOString()),m.from("delivery_assignments").select("id, status, created_at, delivery_fee, commission_amount").gte("created_at",n.toISOString())]);if(c.data){const v=c.data,V=v.filter(D=>D.status!=="cancelled").reduce((D,x)=>D+(x.total_amount||0),0);p(D=>({...D,totalOrders:v.length,totalRevenue:V,pendingOrders:v.filter(x=>x.status==="pending").length}))}d.data&&p(v=>({...v,totalUsers:d.data.length})),i.data},[g]),e.useCallback(async()=>{const{data:n}=await m.from("orders").select(`
        *,
        profiles:user_id (full_name, phone)
      `).order("created_at",{ascending:!1}).limit(50);if(n){const c=n.map(d=>({...d,created_at:d.created_at||new Date().toISOString(),status:d.status,updated_at:d.updated_at||null}));l(c)}},[])}export{we as default};
